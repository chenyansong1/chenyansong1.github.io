<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一个技术渣的自说自话">
<meta property="og:type" content="website">
<meta property="og:title" content="Chen's Blog">
<meta property="og:url" content="http://yoursite.com/page/11/index.html">
<meta property="og:site_name" content="Chen's Blog">
<meta property="og:description" content="一个技术渣的自说自话">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chen's Blog">
<meta name="twitter:description" content="一个技术渣的自说自话">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/11/"/>





  <title> Chen's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chen's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一个技术渣的自说自话</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python的作用域/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python的作用域/" itemprop="url">
                  python的作用域
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><p>python创建、改变、查找变量名都是在所谓的命名空间中进行的，在代码中变量名被赋值的位置决定了这个变量名能被访问的位置。<br>可以在三个地方定义变量</p>
<ul>
<li>在def函数内定义</li>
<li>在嵌套的def中赋值，对于嵌套的函数来说，他是非本地变量</li>
<li>如果在def之外赋值，他就是整个文件全局的</li>
</ul>
<h1 id="2-作用域法则"><a href="#2-作用域法则" class="headerlink" title="2.作用域法则"></a>2.作用域法则</h1><ul>
<li>内嵌的模块是全局作用域<br>  每一个模块都是一个全局的作用域，对于外部的全局变量就是一个模块对象的属性，但是在一个模块中能够像简单的变量一样使用</li>
<li>全局作用域的作用范围仅限于单个文件（即模块），在python中听到“全局”，你就应该想到“模块”</li>
<li>每次对函数的调用都创建了一个新的本地作用域</li>
<li>赋值的变量名除非声明为全局变量或非本地变量，否则均为本地变量<br>  如果需要给一个在函数内部，却位于模块文件顶层的变量名赋值，需要在函数内部通过global语句声明，如果需要给一个嵌套在def中的名称赋值，可以通过一条nonlocal语句声明来做到</li>
<li>其他所有的变量名都可以归纳为本地、全局或者内置的<br>  在def内部为<strong>本地变量</strong><br>  在一个模块的命名空间内部的顶层为<strong>全局变量</strong><br>  有python的预定义的<em>buildin</em>模块提供额为<strong>内置变量</strong></li>
</ul>
<h1 id="3-变量解析：LEGB原则"><a href="#3-变量解析：LEGB原则" class="headerlink" title="3.变量解析：LEGB原则"></a>3.变量解析：LEGB原则</h1><h2 id="3-1-三条简单的原则："><a href="#3-1-三条简单的原则：" class="headerlink" title="3.1.三条简单的原则："></a>3.1.三条简单的原则：</h2><ul>
<li>变量名引用分为三个作用域进行查找：<strong>首先是在本地、之后是函数内（如果有的话）、之后是全局、最后是内置</strong></li>
<li>在默认情况下，变量名赋值会创建或改变本地变量</li>
<li>全局申明和非本地声明将赋值的变量名映射到模块文件内部的作用域<h2 id="3-2-LEGB原则"><a href="#3-2-LEGB原则" class="headerlink" title="3.2.LEGB原则"></a>3.2.LEGB原则</h2></li>
<li>当在函数中使用未认证的变量名时，python搜索4个作用域：本地作用域【L】，之后是上一层结构中def或lambda的本地作用域【E】，之后是全局作用域【G】，最后是内置作用域【B】，如果还是没有找到就会报错，因为变量在使用之前必须先要赋值的</li>
<li>当在函数中给一个变量名赋值的时候，python总是创建或者使用本地作用域的变量名，除非该变量名已经在函数中声明为全局变量</li>
</ul>
<h2 id="3-3-LEGB四个作用域的关系"><a href="#3-3-LEGB四个作用域的关系" class="headerlink" title="3.3.LEGB四个作用域的关系"></a>3.3.LEGB四个作用域的关系</h2><p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/python/legb/1.png" alt=""></p>
<h2 id="3-4-作用域实例"><a href="#3-4-作用域实例" class="headerlink" title="3.4.作用域实例"></a>3.4.作用域实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">#Global scope                    #全局变量名：X 、func (def 语句在这个模块的顶层将一个函数对象赋值给了变量名func)</div><div class="line">X = 99</div><div class="line">def func(Y):</div><div class="line">    #local scope                   #本地变量名：Y、Z</div><div class="line">    Z = X + Y</div><div class="line">    return Z</div><div class="line"></div><div class="line">func(1)                    #100</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#def作用域</div><div class="line">def f1():</div><div class="line">    x = 88                        #def变量名：x 、f2</div><div class="line">    def f2(x=x):</div><div class="line">        print(x)                  #本地变量名：x</div><div class="line">    f2()</div><div class="line"></div><div class="line">..</div><div class="line">f1()       #print 88</div></pre></td></tr></table></figure>
<h1 id="4-global语句"><a href="#4-global语句" class="headerlink" title="4.global语句"></a>4.global语句</h1><h2 id="4-1-全局变量名总结"><a href="#4-1-全局变量名总结" class="headerlink" title="4.1.全局变量名总结"></a>4.1.全局变量名总结</h2><ul>
<li>全局变量名时位于模块文件内部的顶层的变量名</li>
<li>全局变量名如果要在函数内部被赋值的话，必须经过global的声明</li>
<li>全局变量名在函数的内部不经过声明是可以被引用的（但是不会对变量做原处修改）</li>
</ul>
<h2 id="4-2-对全局变量在本地域中做原处修改"><a href="#4-2-对全局变量在本地域中做原处修改" class="headerlink" title="4.2.对全局变量在本地域中做原处修改"></a>4.2.对全局变量在本地域中做原处修改</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#1</div><div class="line">x = 99</div><div class="line">def func():</div><div class="line">    x = 100</div><div class="line">    print(x)</div><div class="line"></div><div class="line">func()           #100</div><div class="line">print(x)        #99</div><div class="line"></div><div class="line">#2</div><div class="line">x = 99</div><div class="line">def func():</div><div class="line">    global x                #通过global语句使自己明确地映射到了模块的作用域，如果没有使用global语句的话，x将会由于赋值而被认为是本地变量</div><div class="line">    x = 100</div><div class="line">    print(x)</div><div class="line"></div><div class="line">func()           #100</div><div class="line">print(x)      #100</div></pre></td></tr></table></figure>
<h1 id="5-导入模块对象"><a href="#5-导入模块对象" class="headerlink" title="5.导入模块对象"></a>5.导入模块对象</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#first.py</div><div class="line">X = 99</div><div class="line"></div><div class="line">#second.py</div><div class="line">import first.py</div><div class="line">print(first.X)</div><div class="line">first.X = 88</div><div class="line"></div><div class="line">#一个模块文件的全局变量一个被导入就成为了这个模块对象的一个属性</div></pre></td></tr></table></figure>
<h1 id="6-工厂函数"><a href="#6-工厂函数" class="headerlink" title="6.工厂函数"></a>6.工厂函数</h1><p>产生函数的工厂<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">def maker(N):</div><div class="line">    def action(X):</div><div class="line">        return X ** N</div><div class="line">    return action                    #将里面的函数返回了</div><div class="line"></div><div class="line"></div><div class="line">#调用上面的函数</div><div class="line">f = maker(2)</div><div class="line">f(3)            #返回9</div><div class="line">f(4)            #返回16</div><div class="line"></div><div class="line">g = maker(3)</div><div class="line">g(3)            #返回27                内嵌的函数记住了整数N ,这里是3</div><div class="line">f(4)            #返回16                  内嵌的函数记住了整数N ,这里是2</div></pre></td></tr></table></figure></p>
<h1 id="7-nonlocal语句"><a href="#7-nonlocal语句" class="headerlink" title="7.nonlocal语句"></a>7.nonlocal语句</h1><p>nonlocal应用于一个嵌套的函数的作用域中的一个名称，而不是所有def之外的全局模块作用域，而且，在声明nonlocal名称的时候，他必须已经存在于嵌套函数的作用域中——他们可能只存在于一个嵌套函数中，并且不能由一个嵌套的def中的第一次赋值创建</p>
<h2 id="7-1-语法格式"><a href="#7-1-语法格式" class="headerlink" title="7.1.语法格式"></a>7.1.语法格式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def func():</div><div class="line">    nonlocal name1, name2,...</div></pre></td></tr></table></figure>
<ul>
<li>当一个函数def嵌套在另一个函数中，嵌套的函数引用嵌套的def的作用域中的赋值所定义的任何名称，但是不能修改他们，此时nonlocal就派上用场了</li>
<li>nonlocal使得对该语句中列出的名称的查找从嵌套的def的作用域开始，而不是从本地作用域开始，也就是说：nonlocal也意味着“完全略过我的本地作用域”，所以在一个嵌套的def中必须提前定义过nonlocal的变量名</li>
<li>nonlocal的作用域查找只限定在嵌套的def中，作用域查找不会到全局作用域或者是内置作用域</li>
</ul>
<h2 id="7-2-应用举例"><a href="#7-2-应用举例" class="headerlink" title="7.2.应用举例"></a>7.2.应用举例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">#被nonlocal使用的变量只能且必须出现在def嵌套中</div><div class="line">spam = 99</div><div class="line">def tester():</div><div class="line">    def nested():</div><div class="line">        nonlocal spam</div><div class="line">        print(&apos;Current=&apos;, spam)</div><div class="line">        spam + = 1</div><div class="line">    return nested</div><div class="line"></div><div class="line">...</div><div class="line">SyntaxError: no binding for nonlocal &apos;spam&apos; found </div><div class="line">#nonlocal限制作用域查找仅为嵌套的def，nonlocal不会在嵌套的模块的全局作用域或者是所有def之外的内置作用域中查找</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#默认情况下，不允许修改def作用域中的名称</div><div class="line">def tester(str):</div><div class="line">    state  = str</div><div class="line">    def nested(lable, state):</div><div class="line">        print(label, state)</div><div class="line">        state += 1                        #因为将state当做是函数nested的本地变量,state在使用之前没有赋值,所以此处是不能使用的</div><div class="line">    return nested</div><div class="line">..</div><div class="line">UnboundLocalError:local variable &apos;state&apos; referenced before assignment</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#nonlocal语句允许在内存中保持可变状态的多个副本(使用nonlocal进行修改)</div><div class="line">def tester(str):</div><div class="line">    state  = str        #赋值操作</div><div class="line">    def nested(lable, state):</div><div class="line">        nonlocal state    #声明为nolocal,那么就去嵌套的def中找</div><div class="line">        print(label, state)</div><div class="line">        state += 1                        </div><div class="line">    return nested</div><div class="line"></div><div class="line">...</div><div class="line">F = tester(0)                              #F函数记住了内嵌函数中的state，初始化状态为0</div><div class="line">F(&apos;spam&apos;)</div><div class="line">&gt;&gt;spam 0</div><div class="line">F(&apos;ham&apos;)</div><div class="line">&gt;&gt;ham 1</div><div class="line"></div><div class="line">G = tester(42)                                 #G函数记住了内嵌函数中的state，初始化状态为42</div><div class="line">G(&apos;spam&apos;)</div><div class="line">&gt;&gt;spam 42</div><div class="line">G(&apos;ham&apos;)</div><div class="line">&gt;&gt;ham 43</div><div class="line"></div><div class="line">F(&apos;bacon&apos;)</div><div class="line">&gt;&gt;bacon 3</div><div class="line"></div><div class="line"></div><div class="line">#因为F函数和G函数分别记住了内嵌函数的state的不同的初始化值，所以存在多个副本的情况</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型字符串/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型字符串/" itemprop="url">
                  python数据类型之字符串
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;python和c语言不一样，<strong>没有单个字符的数据类型</strong>，取而代之的是一个字符的字符串，<strong>python的字符串被划分为不可变序列</strong>，意味着这些字符串所包含的字符串存在从左到右的位置顺序，并且他们不可以在原处修改。</p>
<p>下表是常见的字符串和表达式</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>s = ‘’</td>
<td>空字符串</td>
</tr>
<tr>
<td>s = “sam” 或 s = ‘sam’</td>
<td>单引号和双引号相同</td>
</tr>
<tr>
<td>s = ‘’’ abcde ‘’’</td>
<td>三引号字符串（单引号和双引号都可）</td>
</tr>
<tr>
<td>s = “\temp \n dfsdfsf”</td>
<td>其中包含转义字符</td>
</tr>
<tr>
<td>s1 + s2</td>
<td>合并</td>
</tr>
<tr>
<td>s * 3</td>
<td>重复</td>
</tr>
<tr>
<td>s[i]</td>
<td>索引</td>
</tr>
<tr>
<td>s[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(s)</td>
<td>取长度</td>
</tr>
<tr>
<td>“my name is {0} ,age is {1}”.format(name,age)</td>
<td>字符串格式化表达式</td>
</tr>
<tr>
<td>s.find(“aaaa”)</td>
<td>搜素</td>
</tr>
<tr>
<td>s.rstrip()</td>
<td>移除空格</td>
</tr>
<tr>
<td>s.split(‘,’)</td>
<td>加入分隔符</td>
</tr>
<tr>
<td>s.isdigit()</td>
<td>内容测试（是否是digit）</td>
</tr>
<tr>
<td>s.lower()</td>
<td>大小写转换</td>
</tr>
<tr>
<td>s.endwith(“spam”)</td>
<td>结束测试</td>
</tr>
<tr>
<td>”spam”.join(strlist)</td>
<td>插入分隔符</td>
</tr>
</tbody>
</table>
<h1 id="1-字符串常量"><a href="#1-字符串常量" class="headerlink" title="1.字符串常量"></a>1.字符串常量</h1><ul>
<li>单引号： ‘spa”m’</li>
<li>双引号：“spa’m”</li>
<li>三引号：’’’ …….spam…’’’     /          “””……..spam…….”””</li>
</ul>
<p>单引号和双引号是可以互换的，可以在一个单引号字符串中嵌入一个双引号，反之，亦然。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&apos;knsdfsfsi&quot;ssss&apos; , &quot;dfsfldsfsldf&apos;sdfsdf&quot;</div></pre></td></tr></table></figure></p>
<p>Python会自动的合并相邻的字符串常量，尽管可以简单的在他们之间增加+操作符来说明这一合并操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">title = &quot;meaning&quot; &apos;of&apos; &quot;life&quot;</div><div class="line">&gt;&gt;title</div><div class="line">meaning of life</div></pre></td></tr></table></figure></p>
<h1 id="2-转义字符"><a href="#2-转义字符" class="headerlink" title="2.转义字符"></a>2.转义字符</h1><p>&emsp;转义序列让我们可以在字符串中嵌入不容易通过键盘输入的字节，字符串常量中字符“\”，以及在它后面的一个或者多个字符，在最终字符串对象中会被一个单个字符所替代，这个字符通过转义序列定义了一个二进制值例如：有一个五个字符的字符串，其中嵌入了一个换行符和一个制表符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;a\nb\tc&apos;</div><div class="line"></div><div class="line">&gt;&gt;print(s)</div><div class="line">a</div><div class="line">b    c</div><div class="line"></div><div class="line">&gt;&gt;len(s)</div><div class="line">5</div></pre></td></tr></table></figure></p>
<p><strong>注意原始的反斜杠字符并不真正的和字符串一起存在在内存中</strong></p>
<p>下面是常见的反斜杠字符表</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\newline</td>
<td>忽视连续</td>
</tr>
<tr>
<td>\</td>
<td>反斜杠</td>
</tr>
<tr>
<td>\’</td>
<td>单引号</td>
</tr>
<tr>
<td>\”</td>
<td>双引号</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\t</td>
<td>水平制表符</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符</td>
</tr>
<tr>
<td>\xhh</td>
<td>十六进制值</td>
</tr>
<tr>
<td>\ooo</td>
<td>八进制值</td>
</tr>
<tr>
<td>\0</td>
<td>Null（不是字符串结尾）</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;a\ob\oc&apos;</div><div class="line">&gt;&gt;s</div><div class="line">&apos;a\x00b\x00c&apos;</div><div class="line"></div><div class="line">&gt;&gt;len(s)</div><div class="line">5</div></pre></td></tr></table></figure>
<p>如果python没有作为一个合法的转义编码识别出在“\”后的字符，他就直接在最终的字符串中保留反斜杠<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;x = &quot;C:\py\code&quot;</div><div class="line">&gt;&gt;x</div><div class="line">&apos;C:\\py\\code&apos;</div><div class="line"></div><div class="line">&gt;&gt;len(x)</div><div class="line">10</div></pre></td></tr></table></figure></p>
<h1 id="3-raw-转义抑制"><a href="#3-raw-转义抑制" class="headerlink" title="3.raw 转义抑制"></a>3.raw 转义抑制</h1><p>&emsp;有时我们会像这样打开一个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myfile = open(&apos;C:\new\test.data&apos;,&apos;w&apos;)                        #因为有转义的存在，所以最终显示的是：   C:(换行）ew(制表符）est.data      的文件</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;为了解决上面的问题，使用字母r（大写或小写）放在字符串的第一个引号的前面，这样会自动的关闭转义机制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myfile = open(r&apos;C:\new\test.data&apos;,&apos;w&apos;)               # r会抑制转义</div></pre></td></tr></table></figure></p>
<p>另外一种方法是，加入反斜杠的转义序列，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myfile = open(&apos;C:\\new\\test.data&apos;,&apos;w&apos;)</div></pre></td></tr></table></figure></p>
<h1 id="4-三引号"><a href="#4-三引号" class="headerlink" title="4.三引号"></a>4.三引号</h1><p>作用：</p>
<ul>
<li><p>编写多行字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; a = &apos;&apos;&apos; my name is </div><div class="line">chenyansong , age is 24 &apos;&apos;&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>作为多行注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&quot;&quot;&quot; this is print result&quot;&quot;&quot;                                    #表示注释</div><div class="line">print(s)</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="5-字符串的基本操作"><a href="#5-字符串的基本操作" class="headerlink" title="5.字符串的基本操作"></a>5.字符串的基本操作</h1><h2 id="5-1"><a href="#5-1" class="headerlink" title="5.1.+"></a>5.1.+</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&apos;abc&apos; + &apos;def&apos;               #字符串合并，两个字符串对象相加创建了一个新的字符串对象</div><div class="line">&apos;abcdef&apos;</div></pre></td></tr></table></figure>
<h2 id="5-2"><a href="#5-2" class="headerlink" title="5.2.*"></a>5.2.*</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;print(&apos;------------ ...more....-----------&apos;)               #90个横线</div><div class="line">&gt;&gt;print( &apos;-&apos; * 90)                                                  #90个横线，这就是重复的作用，可以避免我们冗余的操作</div></pre></td></tr></table></figure>
<p>注意：在应用于数字时，执行加法和乘法的相同的操作符+和* ，python不允许你在+表达式中混合数字和字符串：‘aaa’+9会跑出一个异常</p>
<h2 id="5-3-in"><a href="#5-3-in" class="headerlink" title="5.3.in"></a>5.3.in</h2><p>&emsp;&emsp;in表达式操作符用于对字符和子字符串进行<strong>成员关系的测试</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;myjob = &apos;hacker&apos;</div><div class="line"></div><div class="line">&gt;&gt; &apos;k&apos; in myjob                                       </div><div class="line">True</div><div class="line"></div><div class="line">&gt;&gt;&apos;z&apos; in myjob</div><div class="line">False</div><div class="line"></div><div class="line">&gt;&gt;&quot;spam&quot; in &quot;abcdAspam&quot;                                    #用来测试子串在父串中是否存在</div><div class="line">True</div></pre></td></tr></table></figure></p>
<h1 id="6-索引和分片"><a href="#6-索引和分片" class="headerlink" title="6.索引和分片"></a>6.索引和分片</h1><h2 id="6-1-索引"><a href="#6-1-索引" class="headerlink" title="6.1.索引"></a>6.1.索引</h2><ul>
<li>第一个元素的偏移为0</li>
<li>负偏移索引意味着从最后或右边反向进行计数</li>
<li>s[0] 获取了第一个元素</li>
<li>s[-2] 获取了倒数第二个元素，（就像s[len(s)-2]一样）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;spam&apos;</div><div class="line">&gt;&gt;s[0], s[-2]</div><div class="line">(&apos;s&apos;, &apos;a&apos;)</div></pre></td></tr></table></figure>
<h2 id="6-2-分片"><a href="#6-2-分片" class="headerlink" title="6.2.分片"></a>6.2.分片</h2><p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/python/str/1.png" alt=""></p>
<ul>
<li>上边界并不包含在内</li>
<li>分片的默认边界为0和序列的长度，如果没有给出的话</li>
<li>s[1:3] 获取了从偏移为1的元素，知道但不包含偏移为3的元素</li>
<li>s[1:] 获取了从偏移为1直到结尾（偏移为序列长度）之间的元素</li>
<li>s[:3] 获取了偏移为0直到但不包含偏移为3之间的元素</li>
<li>s[:-1] 获取了从偏移为0直到但是不包含最后一个元素之间的元素</li>
<li>s[:] 获取了从偏移0到末尾之间的元素，这有效的实现了顶层s拷贝</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;spam&apos;</div><div class="line">&gt;&gt;s[1:3],s[1:],s[:-1]</div><div class="line">(&apos;pa&apos;, &apos;pam&apos;, &apos;spa&apos;)</div></pre></td></tr></table></figure>
<h2 id="6-3-分片扩展：第三个限制值"><a href="#6-3-分片扩展：第三个限制值" class="headerlink" title="6.3.分片扩展：第三个限制值"></a>6.3.分片扩展：第三个限制值</h2><p>&emsp;在python2.3中，分片表达式增加了一个可选的第三个索引，用作步进，如下<br>x[I:J:K]  表示：索引x对象中的元素，从偏移为I直到偏移为J-1，每隔K元素索引一次，默认K=1 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;abcdefg&apos;</div><div class="line">&gt;&gt;s[1:5:2]</div><div class="line">&apos;bdf&apos;</div><div class="line"></div><div class="line">&gt;&gt;s = &apos;hello&apos;</div><div class="line">&gt;&gt;s[::-1]</div><div class="line">&apos;olleh&apos;                                       #步进-1表示分片将会从右至左进行而不是通常的从左至右，实际的意义就是将取得的字符串反转</div></pre></td></tr></table></figure>
<h1 id="7-字符串转换工具"><a href="#7-字符串转换工具" class="headerlink" title="7.字符串转换工具"></a>7.字符串转换工具</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;int(&apos;42&apos;),str(42)</div><div class="line">(42,&apos;42&apos;)</div><div class="line"></div><div class="line">&gt;&gt;s = &apos;42&apos;</div><div class="line">&gt;&gt;I = 1</div><div class="line">&gt;&gt;s +I</div><div class="line">TypeError:cannot concatenate &apos;str&apos; and &apos;int&apos; object</div><div class="line"></div><div class="line">&gt;&gt;int(s) +I                                                      #转换成int</div><div class="line">43</div><div class="line"></div><div class="line">&gt;&gt;s + str(I)                                                   #转换成str</div><div class="line">&apos;431&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;ord(&apos;s&apos;)                                                   #ord函数将单个字符转换成ASCII码</div><div class="line">115</div><div class="line"></div><div class="line">&gt;&gt;chr(115)                                                #chr将ASCII码转成对应的字符</div><div class="line">&apos;s&apos;</div></pre></td></tr></table></figure>
<h1 id="8-字符串方法"><a href="#8-字符串方法" class="headerlink" title="8.字符串方法"></a>8.字符串方法</h1><h2 id="8-1-修改字符串"><a href="#8-1-修改字符串" class="headerlink" title="8.1.修改字符串"></a>8.1.修改字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">#方法1</div><div class="line">&gt;&gt; s = &apos;spamy&apos;</div><div class="line">&gt;&gt; s = s[:3] + &apos;xx&apos; + s[5:]                                          #切片+拼接</div><div class="line">&gt;&gt;s</div><div class="line">&apos;spaxxy&apos;</div><div class="line"></div><div class="line"></div><div class="line">#方法2</div><div class="line">&gt;&gt; s = &apos;spammymmy&apos;</div><div class="line">&gt;&gt; s = s.replace(&apos;mm&apos;,&apos;xx&apos;)                                    #replace直接替换，会替换匹配到的所有</div><div class="line">&gt;&gt; s</div><div class="line">&apos;spaxxyxxy&apos;</div><div class="line"></div><div class="line">&gt;&gt; s = &apos;spammymmy&apos;</div><div class="line">&gt;&gt; s = s.replace(&apos;mm&apos;,&apos;xx&apos;,1)                                    #replace直接替换，只是替换第一个</div><div class="line">&gt;&gt; s</div><div class="line">&apos;spaxxymmy&apos;</div><div class="line"></div><div class="line"></div><div class="line">#方法3</div><div class="line">&gt;&gt; s = &apos;xxxxSPAMxxxxSPAMxxxx&apos;</div><div class="line">&gt;&gt; where = s.find(&apos;SPAM&apos;)</div><div class="line">&gt;&gt;where</div><div class="line">5</div><div class="line">&gt;&gt;s = s[:where] + &apos;EGGS&apos; + s[(where + 4):]</div><div class="line">&gt;&gt;s</div><div class="line">&apos;xxxxEGGSxxxxSPAMxxxx&apos;</div><div class="line"></div><div class="line"></div><div class="line">#方法4</div><div class="line">&gt;&gt; s = &apos;spammy&apos;</div><div class="line">&gt;&gt; L =list(s)</div><div class="line">&gt;&gt; L</div><div class="line">[&apos;s&apos;, &apos;p&apos;, &apos;a&apos;, &apos;m&apos;, &apos;m&apos;, &apos;y&apos;]</div><div class="line"></div><div class="line">&gt;L[3] = &apos;x&apos;</div><div class="line">&gt;L[4] = &apos;x&apos;</div><div class="line">&gt;&gt;L</div><div class="line">[&apos;s&apos;, &apos;p&apos;, &apos;a&apos;, &apos;x&apos;, &apos;x&apos;, &apos;y&apos;]</div><div class="line"></div><div class="line">&gt;&gt;s = &apos;&apos;.join(L)                        #使用join函数去拼接</div><div class="line">&gt;&gt;s</div><div class="line">&apos;spaxxy&apos;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#join的用法</div><div class="line">&gt;&gt; &apos;SPAM&apos;.join([&apos;eggs&apos;, &apos;sausage&apos;, &apos;ham&apos;, &apos;toast&apos;])               #使用SPAM去连接，组成新的字符串</div><div class="line"> &apos;eggsSPAMsausageSPAMhamSPAMtoast&apos;</div></pre></td></tr></table></figure>
<h2 id="8-2-split"><a href="#8-2-split" class="headerlink" title="8.2.split"></a>8.2.split</h2><p>&emsp;将一个字符串分割为一个子字符串的列表，以分隔符字符串为标准，默认的分隔符为空格<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; line = &apos;aaa bbb ccc&apos;</div><div class="line">&gt;&gt; cols = line.split()</div><div class="line">&gt;&gt; cols</div><div class="line">[&apos;aaa&apos;, &apos;bbb&apos;, &apos;ccc&apos;]</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;line = &quot;i&apos;mSPAMaSPAMboy&quot;                           </div><div class="line">&gt;&gt; line.split(SPAM)                                          #使用“SPAM”去分割</div><div class="line">[&quot;i&apos;m&quot;, &apos;a&apos;, &apos;boy&apos;]</div></pre></td></tr></table></figure></p>
<h2 id="8-3-rstrip-清除每行末尾空白"><a href="#8-3-rstrip-清除每行末尾空白" class="headerlink" title="8.3.rstrip 清除每行末尾空白"></a>8.3.rstrip 清除每行末尾空白</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;line = &quot;the knigts who say Ni!\n&quot;</div><div class="line">&gt;&gt;line.rstrip()</div><div class="line">&quot;the knights who say Ni!&quot;                           #去掉每行末尾的换行符</div></pre></td></tr></table></figure>
<h2 id="8-4-大小写转换"><a href="#8-4-大小写转换" class="headerlink" title="8.4.大小写转换"></a>8.4.大小写转换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;my name is cys&apos;</div><div class="line">&gt;&gt;s.upper()</div><div class="line">&apos;MY NAME IS CYS&apos;</div></pre></td></tr></table></figure>
<h2 id="8-5-内容检测"><a href="#8-5-内容检测" class="headerlink" title="8.5.内容检测"></a>8.5.内容检测</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;my name is cys&apos;</div><div class="line">&gt;&gt;&quot;cys&quot; in s</div><div class="line">True</div></pre></td></tr></table></figure>
<h2 id="8-6-检测末尾或起始字符串"><a href="#8-6-检测末尾或起始字符串" class="headerlink" title="8.6.检测末尾或起始字符串"></a>8.6.检测末尾或起始字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;s = &apos;my name is cys&apos;</div><div class="line">&gt;&gt;s.endswith(cys)</div><div class="line">True</div></pre></td></tr></table></figure>
<h1 id="9-字符串格式化表达式"><a href="#9-字符串格式化表达式" class="headerlink" title="9.字符串格式化表达式%"></a>9.字符串格式化表达式%</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&apos;This is %d %s bird&apos; % (1,&apos;dead&apos;)</div><div class="line">This is 1 dead bird</div></pre></td></tr></table></figure>
<p>格式化字符串：</p>
<ul>
<li>在%操作符的左侧放置一个需要进行格式化的字符串，这个字符串带有一个或多个嵌入的转换目标，都以%开头（例如：%d)</li>
<li>在%操作符右侧放置一个（或多个，嵌入到元组中）对象，这些对象将会插入到左侧想让python进行格式化字符串的一个或多个转换目标的位置上去</li>
<li>注意：当不止一个值待插入的时候，应该在右侧用括号把它们括起来，即将他们放入到元组中去，%格式化表达式操作符在其右侧期待一个或多个项（此时就是元组）</li>
</ul>
<p>字符串格式化代码</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>s</td>
<td>字符串（或任何对象）</td>
</tr>
<tr>
<td>r</td>
<td>s,但使用repr ,而不是str</td>
</tr>
<tr>
<td>c</td>
<td>字符</td>
</tr>
<tr>
<td>d</td>
<td>十进制</td>
</tr>
<tr>
<td>i</td>
<td>整数</td>
</tr>
<tr>
<td>u</td>
<td>无符号整数</td>
</tr>
<tr>
<td>o</td>
<td>八进制整数</td>
</tr>
<tr>
<td>X</td>
<td>打印大写</td>
</tr>
<tr>
<td>e</td>
<td>浮点指数</td>
</tr>
<tr>
<td>f</td>
<td>浮点十进制</td>
</tr>
</tbody>
</table>
<h2 id="9-1-基于字典的格式化"><a href="#9-1-基于字典的格式化" class="headerlink" title="9.1.基于字典的格式化"></a>9.1.基于字典的格式化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&quot;%(n)d %(x)s&quot; % &#123;&quot;n&quot;:1, &quot;x&quot;:&quot;spam&quot;&#125;               #格式化字符串里（n)和（x）引用了右边字典中的键，并提取他们相应的值</div><div class="line">&apos;1 spam&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;reply = &apos;&apos;&apos;</div><div class="line">my name is %(name)s</div><div class="line">my birthday is %(birthday)s</div><div class="line">my work is %(work)s</div><div class="line">&apos;&apos;&apos;</div><div class="line">&gt;&gt;values = &#123;&quot;name&quot;:&quot;cys&quot;,&quot;birthday&quot;:&quot;1992.12.21&quot;,&quot;work&quot;:&quot;IT worker&quot;&#125;</div><div class="line"></div><div class="line">&gt;&gt;print(reply % values)</div><div class="line">my name is  cys</div><div class="line">my birthday is 1992.12.21</div><div class="line">my work is IT worker</div></pre></td></tr></table></figure>
<h1 id="10-字符串格式化调用方法：format"><a href="#10-字符串格式化调用方法：format" class="headerlink" title="10.字符串格式化调用方法：format"></a>10.字符串格式化调用方法：format</h1><p>在主体字符串中，花括号通过位置（例如：{1}）或关键字（例如：{food}）指出替换目标即将要插入的参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&quot;&#123;0&#125;, &#123;1&#125;, and &#123;2&#125;&quot;.format(&apos;spam&apos;, &apos;ham&apos;, &apos;eggs&apos;)                  #通过位置</div><div class="line">&apos;spam , ham and eggs&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;&quot;my name is &#123;name&#125;, old is &#123;age&#125;&quot;.format( name=&quot;cys&quot;, age=&quot;24&quot; )               #通过关键字</div><div class="line">&apos;my name is cys, old is 24&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;&quot;my name is &#123;name&#125;, old is &#123;0&#125;, and my favious is &#123;food&#125;&quot;.format( 24, name=&quot;cys&quot;, food=[1,3] )         #位置和关键字混合</div><div class="line">&apos;my name is cys, old is 24, and my favious is [1,3]&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;import sys</div><div class="line">&gt;&gt;&quot;My &#123;1[spam]&#125; runs &#123;0.platform&#125;&quot;.format(sys, &#123;&apos;spam&quot;:&quot;laptop&quot;&#125;)                                             #1表示第一个参数，而1[spam]表示取第一个参数的属性</div><div class="line">&apos;My laptop runs win32&apos;</div><div class="line"></div><div class="line">&gt;&gt;&quot;My &#123;config[spam]&#125; runs &#123;sys.platform&#125;&quot;.format(sys = sys , config = &#123;&quot;spam&quot;:&quot;laptop&quot;&#125;)            </div><div class="line">&apos;My laptop runs win32&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;someList = list(&apos;SPAM&apos;)</div><div class="line">&gt;&gt;parts = someList[0],someList[-1], someList[1:3]</div><div class="line">&gt;&gt;&quot;first=&#123;0&#125;,last=&#123;1&#125;, middle=&#123;2&#125;&quot;.format(*parts)</div><div class="line">&quot;first=S, last=M, middle=[&apos;P&apos;,&apos;A&apos;]&quot;</div></pre></td></tr></table></figure></p>
<p>具体格式化<br>{fieldname!conversionflag:formatspec}</p>
<ul>
<li>fieldname是指参数的一个数字或关键字，后面跟着可选的“.name” 或者”[index]“成分引用</li>
<li>conversionflag 可以是r、s、或者是a分别表示该值上对repr,str、或ascii内置函数的一次调用</li>
<li>formatspec 指定了如何表示该值，包括字段宽度、对齐方式、不零、小数点精度等细节<br>冒号后的formatspec 组成形式<br>[ [fill]align] [sign] [#] [0] [widht] [.precision] [typecode]<br>align可能是&lt;   &gt;    =    ^  表示左对齐、右对齐、一个标记字符后的补充或居中对齐</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; &apos;&#123;0:&lt;10&#125; = &#123;1:&gt;10&#125;&apos;.format(&apos;spam&apos;, 123,4567)</div><div class="line">&apos;spam      =   123.4567&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;&apos;&#123;0:f&#125;, &#123;1:.2f&#125;, &#123;2:06.2f&#125;&apos;.format(3.14159, 3.14159, 3.14159)</div><div class="line">&apos;3.141590,  3.14,  003.14&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;&apos;&#123;0:.&#123;1&#125;f&#125;&apos;.format(1/3.0, 4)</div><div class="line">&apos;0.3333&apos;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;format(1.2345, &apos;.2f&apos;)</div><div class="line">&apos;1.23&apos;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型之文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型之文件/" itemprop="url">
                  python数据类型之文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-常见的文件运算"><a href="#1-常见的文件运算" class="headerlink" title="1.常见的文件运算"></a>1.常见的文件运算</h1><table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>output = open(r’C:\spam’, ‘w’)</td>
<td>创建输出文件（w表示写入）</td>
</tr>
<tr>
<td>input = open(‘data’, ‘r’)</td>
<td>创建输入文件（r表示读）</td>
</tr>
<tr>
<td>input = open(‘data’)</td>
<td>同上（默认是r)</td>
</tr>
<tr>
<td>aString = input.read()</td>
<td>把整个文件读进单一字符串</td>
</tr>
<tr>
<td>aString = input.read(N)</td>
<td>读取之后的N个字节到一个字符串</td>
</tr>
<tr>
<td>aString = input.readline()</td>
<td>读取下一行（包含文末标识符）到一个字符串</td>
</tr>
<tr>
<td>aList = input.readlines()</td>
<td>读取整个文件到字符串列表</td>
</tr>
<tr>
<td>output.write(aString)</td>
<td>写入字节字符串到文件</td>
</tr>
<tr>
<td>output.writelines(aList)</td>
<td>将列表中所有字符串写入到文件</td>
</tr>
<tr>
<td>output.close()</td>
<td>手动关闭</td>
</tr>
<tr>
<td>output.flush()</td>
<td>将输出缓冲刷到磁盘，但是不关闭</td>
</tr>
<tr>
<td>anyFile.seek(N)</td>
<td>修改文件位置到偏移量N处以便进行下一个操作</td>
</tr>
<tr>
<td>for line in open(‘data’): use line</td>
<td>文件迭代器一行一行的读取</td>
</tr>
<tr>
<td>open(‘f.txt’, encoding=’latin-1’)</td>
<td></td>
</tr>
<tr>
<td>open(‘f.bin’, ‘rb’)</td>
</tr>
</tbody>
</table>
<h1 id="2-打开文件的模式"><a href="#2-打开文件的模式" class="headerlink" title="2.打开文件的模式"></a>2.打开文件的模式</h1><p>open(file_name, 处理模式）</p>
<ul>
<li>r 表示输入打开文件（默认）</li>
<li>w 表示输出打开文件</li>
<li>a 表示在文件尾部追加内容而打开文件</li>
<li>ｂ表示进行二进制数据处理</li>
</ul>
<h1 id="3-文件写入"><a href="#3-文件写入" class="headerlink" title="3.文件写入"></a>3.文件写入</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; myfile = open(&apos;myfile.txt&apos;, &apos;w&apos;)</div><div class="line">&gt;&gt; myfile.write(&apos;hello text fle\n&apos;)                 #写入方法不会为我们添加终止符，我们必须手动添加行终止符（否则，下次写入时会简单地延长文件的当前行）</div><div class="line">16                                                            #表示写入了16个字符</div><div class="line">&gt;&gt; myfile.write(&apos;goodbye text fle\n&apos;)</div><div class="line">18</div><div class="line">&gt;&gt; myfile.close()</div></pre></td></tr></table></figure>
<h1 id="4-文件读取"><a href="#4-文件读取" class="headerlink" title="4.文件读取"></a>4.文件读取</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; myfile = open(&apos;myfile.txt&apos;)            #默认的模式r，读取</div><div class="line">&gt;&gt;myfile.readline()</div><div class="line">&apos;hello text fle\n&apos;</div><div class="line">&gt;&gt;myfile.readline()</div><div class="line">&apos;goodbye text fle\n&apos;</div><div class="line">&gt;&gt;myfile.readline()</div><div class="line">&apos;&apos;                                                #已经到了文件的末尾</div><div class="line"></div><div class="line"></div><div class="line">#另一种读取方式</div><div class="line">&gt;&gt;for line in open(myfile):                        #open临时创建的文件对象将自动在每次循环迭代的时候读入并返回一行</div><div class="line">..... print(line,end=&apos;&apos;)</div></pre></td></tr></table></figure>
<h1 id="5-在文件中存储并解析python对象"><a href="#5-在文件中存储并解析python对象" class="headerlink" title="5.在文件中存储并解析python对象"></a>5.在文件中存储并解析python对象</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">#步骤1、创建对象</div><div class="line">&gt;&gt;x, y, z = 43, 44, 45</div><div class="line">&gt;&gt; s =&apos;spam&apos;</div><div class="line">&gt;&gt;D = &#123;&apos;a&apos;:1,&apos;b&apos;:2&#125;</div><div class="line">&gt;&gt;L = [1,2,3]</div><div class="line"></div><div class="line">#步骤2：将创建的对象写入文件</div><div class="line">&gt;&gt;F = open(&apos;datafile.txt&apos;, &apos;w&apos;)</div><div class="line">&gt;&gt;F.write(s+ &apos;\n&apos;)</div><div class="line">&gt;&gt;F.write(&apos;%s,%s,%s\n&apos; % (x,y,z))</div><div class="line">&gt;&gt;F.write(str(L) + &apos;$&apos; + str(D) + &apos;\n&apos;)</div><div class="line">&gt;&gt;F.close()</div><div class="line"></div><div class="line">#步骤3：提取文件字符，并转成对象（还原）</div><div class="line">&gt;&gt;F = open(&apos;datafile.txt&apos;)</div><div class="line">&gt;&gt;line = F.readline()</div><div class="line">&gt;&gt;line</div><div class="line">&apos;spam\n&apos;</div><div class="line">&gt;&gt;line.rstrip()</div><div class="line">&apos;spam&apos;                                        #还原字符串</div><div class="line"></div><div class="line">&gt;&gt;line = F.readline()</div><div class="line">&gt;&gt;line</div><div class="line">&apos;43,44,45\n&apos;</div><div class="line">&gt;&gt;parts = line.split(&apos;,&apos;)</div><div class="line">&gt;&gt;parts</div><div class="line">[&apos;43&apos;, &apos;44&apos;, &apos;45\n&apos;]</div><div class="line">&gt;&gt;numbers = [int(p) for p in parts]</div><div class="line">[43, 44, 45]                              #还原int列表</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;line = F.readline()</div><div class="line">&gt;&gt;line</div><div class="line">“[1,2,3]$&#123;&apos;a&apos;:1, &apos;b&apos;:2&#125;\n”</div><div class="line">&gt;&gt;parts = line.split(&apos;$&apos;)</div><div class="line">&gt;&gt;parts</div><div class="line">[&apos;[1,2,3]&apos; , &quot;&#123;&apos;a&apos;:1, &apos;b&apos;:2&#125;&quot;]</div><div class="line">&gt;&gt;objects = [eval(p) for p in parts]                     #eval能够将字符串当做可执行程序代码</div><div class="line">[[1,2,3], &#123;&apos;a&apos;:1, &apos;b&apos;:2&#125;]</div></pre></td></tr></table></figure>
<h1 id="6-使用pickle存取python的原生对象"><a href="#6-使用pickle存取python的原生对象" class="headerlink" title="6.使用pickle存取python的原生对象"></a>6.使用pickle存取python的原生对象</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;D = &#123;&apos;a&apos;:1, &apos;b&apos;:2&#125;</div><div class="line">&gt;&gt;F = open(&apos;datafile.pk1&apos;, &apos;wb&apos;)</div><div class="line">&gt;&gt;import pickle</div><div class="line">&gt;&gt;pickle.dump(D,F)        #将D写入到文件对象F</div><div class="line">&gt;&gt;F.close()</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;F = open(&apos;datafile.pk1&apos;, &apos;rb&apos;)</div><div class="line">&gt;&gt;E = pickle.load(F)</div><div class="line">&gt;&gt;E</div><div class="line">&#123;&apos;a&apos;:1, &apos;b&apos;:2&#125;</div></pre></td></tr></table></figure>
<h1 id="7-打包二进制数据的存储与解析"><a href="#7-打包二进制数据的存储与解析" class="headerlink" title="7.打包二进制数据的存储与解析"></a>7.打包二进制数据的存储与解析</h1><p>struct模块能够构造并解析打包的二进制数据，从某种意义上来说，他是另一个数据转换工具，他能够把文件中的字符串解读为二进制数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;F = open(&apos;data.bin&apos;, &apos;wb&apos;)</div><div class="line">&gt;&gt;import struct</div><div class="line">&gt;&gt;data = struct.pack(&apos;&gt;i4sh&apos;, 7, &apos;spam&apos;, 8)                  #格式化的字符串是：一个4字节的整数，一个包含4个字符的字符串，一个2为整数</div><div class="line">&gt;&gt;data</div><div class="line">b&apos;\xoo\xoo\xoo\xo7spam\xoo\xo8&apos;</div><div class="line">&gt;&gt;F.write(data)</div><div class="line">&gt;&gt;F.close()</div><div class="line"></div><div class="line"></div><div class="line">#读取</div><div class="line">&gt;&gt;F = open(&apos;data.bin&apos;, &apos;rb&apos;)</div><div class="line">&gt;&gt;data = F.read()</div><div class="line">&gt;&gt;data</div><div class="line">b&apos;\xoo\xoo\xoo\xo7spam\xoo\xo8&apos;</div><div class="line">&gt;&gt;values = struct.uppack(&apos;&gt;i4sh&apos;, data)                    #还原数据</div><div class="line">&gt;&gt;values</div><div class="line">(7,&apos;spam&apos;, 8 )</div></pre></td></tr></table></figure></p>
<h1 id="8-其他文件工具"><a href="#8-其他文件工具" class="headerlink" title="8.其他文件工具"></a>8.其他文件工具</h1><ul>
<li>标准流<br>在sys模块中预先打开的文件对象，例如：sys.stdout</li>
<li>os 模块中的描述文件</li>
<li>socket 、pipes 和FIFO文件</li>
<li>通过键来存取的文件</li>
<li>shell命令流</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型之布尔型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型之布尔型/" itemprop="url">
                  python数据类型之布尔型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在python中将整数0代表真，整数1代表假，除此之外，python将任意的空数据结构视为假，将任何的非空数据结构视为真</p>
<ul>
<li>数字如果是非零，则为真</li>
<li>其他对象如果是非空，则为真</li>
</ul>
<p>对象真假的例子</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>“spam”</td>
<td>True</td>
</tr>
<tr>
<td>“”</td>
<td>False</td>
</tr>
<tr>
<td>[]</td>
<td>False</td>
</tr>
<tr>
<td>{}</td>
<td>False</td>
</tr>
<tr>
<td>1</td>
<td>true</td>
</tr>
<tr>
<td>0.0</td>
<td>False</td>
</tr>
<tr>
<td>None</td>
<td>False</td>
</tr>
</tbody>
</table>
<p>None对象<br>一般起到一个空的占位符的作用，与C语言中的NULL指针类似</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型之字典/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型之字典/" itemprop="url">
                  python数据类型之字典
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>字典当成是无序的集合，是通过键来存取的，而不是通过偏移存取，python字典的主要属性如下：</p>
<ul>
<li>通过键而不是偏移量来读取</li>
<li>任意对象的无序集合</li>
<li>可变长、异构、任意嵌套</li>
</ul>
<p>常见的字典常量和操作</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>D = {}</td>
<td>空字典</td>
<td></td>
</tr>
<tr>
<td>D = {“name”:”zhangsan”, “age”:33}</td>
<td></td>
</tr>
<tr>
<td>D = { “name”:”zhangsan”, “food”:{“ham”:1,”egg”:3}}    嵌套</td>
</tr>
<tr>
<td>D = dict(name=”Bob”, age=43)</td>
<td></td>
</tr>
<tr>
<td>D[“eggs”]</td>
<td>通过键索引值</td>
</tr>
<tr>
<td>D[“food”][“egg”]</td>
</tr>
<tr>
<td>‘egg’ in D</td>
<td>判断键是否存在</td>
</tr>
<tr>
<td>D.keys()</td>
<td>获取所有的键视图</td>
</tr>
<tr>
<td>D.values()</td>
<td>获取所有的值视图</td>
</tr>
<tr>
<td>D.items()</td>
<td>获取所有的键+值视图</td>
</tr>
<tr>
<td>D.copy()</td>
<td></td>
</tr>
<tr>
<td>D.get(key, default)</td>
<td>根据键获取值，没有返回默认</td>
</tr>
<tr>
<td>D.update(D2)</td>
<td>合并</td>
</tr>
<tr>
<td>D.pop(key)</td>
<td>删除等</td>
</tr>
<tr>
<td>len(D)</td>
<td>长度</td>
</tr>
<tr>
<td>D[key] = 33</td>
<td>赋值</td>
</tr>
<tr>
<td>del D[key]</td>
<td>根据键删除条目</td>
</tr>
<tr>
<td>list(D.keys())</td>
<td>字典视图转成列表</td>
</tr>
<tr>
<td>D = {x : x*2 for x in range(10)}</td>
<td>初始化字典</td>
</tr>
</tbody>
</table>
<h1 id="1-赋值"><a href="#1-赋值" class="headerlink" title="1.赋值"></a>1.赋值</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt; D[&apos;name&apos;] = [&quot;firstName&quot;,&quot;lastName&quot;]</div><div class="line">&gt;&gt;D</div><div class="line">&#123;&quot;name“:[&quot;firstName&quot;,&quot;lastName&quot;], &quot;age&quot;:22&#125;</div></pre></td></tr></table></figure>
<h1 id="2-取值-根据键，get，-for"><a href="#2-取值-根据键，get，-for" class="headerlink" title="2.取值(根据键，get， for)"></a>2.取值(根据键，get， for)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt;D[&quot;name&quot;]</div><div class="line">&apos;zhangsan&apos;</div><div class="line"></div><div class="line">&gt;&gt;D.get(&quot;name&quot;)                            #如果不存在返回None</div><div class="line">&apos;zhangsan&apos;</div><div class="line"></div><div class="line">&gt;&gt;D.get(&quot;birthday&quot;, &quot;no have name&quot;)       #如果不存在就返回字符串”no have name&quot;</div><div class="line">”no have name&quot;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt; for key in D                     #直接遍历的是字典的key</div><div class="line">......     print(key, &apos;\t&apos;, D[key])</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt; for key in D.keys()                                   #先获取key的集合，然后遍历集合</div><div class="line">......     print(key, &apos;\t&apos;, D[key])</div></pre></td></tr></table></figure>
<h1 id="3-获取不存在的值（避免missing-key错误）"><a href="#3-获取不存在的值（避免missing-key错误）" class="headerlink" title="3.获取不存在的值（避免missing-key错误）"></a>3.获取不存在的值（避免missing-key错误）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#方式1</div><div class="line">if key in D :</div><div class="line">    print (D[key])</div><div class="line">else:</div><div class="line">    print（0）</div><div class="line"></div><div class="line"></div><div class="line">#方式2</div><div class="line">try:</div><div class="line">    print (D[key])</div><div class="line">except KeyError:</div><div class="line">    print（0）</div><div class="line"></div><div class="line"></div><div class="line">#方式3</div><div class="line">D.get(key,defalut)                  #不存在就给一个默认的值</div></pre></td></tr></table></figure>
<h1 id="4-len-长度"><a href="#4-len-长度" class="headerlink" title="4.len 长度"></a>4.len 长度</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt;len(D)</div><div class="line">2</div></pre></td></tr></table></figure>
<h1 id="5-删除pop-del"><a href="#5-删除pop-del" class="headerlink" title="5.删除pop / del"></a>5.删除pop / del</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">del D[&quot;name&quot;]</div><div class="line">&gt;&gt;D</div><div class="line">&#123;&quot;age&quot;:22&#125;</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt;D.pop(&quot;name&quot;)                                    #从字典中删除一个键并返回他的值</div><div class="line"></div><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt;D.pop()                                    #删除并返回最后一个的值</div><div class="line"></div><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt;D.pop(1)                                    #删除指定的一个，并返回值</div></pre></td></tr></table></figure>
<h1 id="6-判断键存在in"><a href="#6-判断键存在in" class="headerlink" title="6.判断键存在in"></a>6.判断键存在in</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line">&gt;&gt; &quot;name&quot; in D                                 #检查某个键是否存在字典中</div><div class="line">True</div></pre></td></tr></table></figure>
<h1 id="7-创建（初始化）字典的方法"><a href="#7-创建（初始化）字典的方法" class="headerlink" title="7.创建（初始化）字典的方法"></a>7.创建（初始化）字典的方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#方式1</div><div class="line">D = &#123;&quot;name“:&quot;zhangsan&quot;, &quot;age&quot;:22&#125;</div><div class="line"></div><div class="line">#方式2</div><div class="line">D = &#123;&#125;</div><div class="line">D[&apos;name&apos;] = &quot;zhangsan&quot;</div><div class="line">D[&apos;age&apos;] = 33</div><div class="line"></div><div class="line">#方式3</div><div class="line">D = dict(name=&quot;zhangsan&quot;, age=33)</div><div class="line"></div><div class="line">#方式4</div><div class="line">D = dict([(&apos;name&apos;,&apos;zhangsan&apos;), (&apos;age&apos;,3)])</div><div class="line"></div><div class="line">#方式5</div><div class="line">D = dict.fromkeys([&apos;a&apos;,&apos;b&apos;],0)            #传入一个键列表，以及所有键的初始值（默认值为空）</div><div class="line">&#123;&apos;a&apos;:0, &apos;b&apos;:0&#125;        </div><div class="line"></div><div class="line">D = &#123;k:0 for k in [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]&#125;</div><div class="line">&gt;&gt;D</div><div class="line">&#123;&apos;a&apos;:0, &apos;b&apos;:0, &apos;c&apos;:0&#125;</div><div class="line"></div><div class="line">D = &#123;k:None for k in [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]&#125;</div><div class="line">&gt;&gt;D</div><div class="line">&#123;&apos;a&apos;:None, &apos;b&apos;:None, &apos;c&apos;:None&#125;</div><div class="line"></div><div class="line">D =dict.fromkeys(&apos;abc&apos;)</div><div class="line">&gt;&gt;D</div><div class="line">&#123;&apos;a&apos;:None, &apos;b&apos;:None, &apos;c&apos;:None&#125;</div></pre></td></tr></table></figure>
<h1 id="8-视图（keys-vlaues-items）"><a href="#8-视图（keys-vlaues-items）" class="headerlink" title="8.视图（keys / vlaues / items）"></a>8.视图（keys / vlaues / items）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = dict(a=1, b=2, c=3)</div><div class="line">&gt;&gt; D</div><div class="line">&#123;&apos;a&apos;:1, &apos;b&apos;:2, &apos;c&apos;:3&#125;</div><div class="line"></div><div class="line">&gt;&gt;K = D.keys()</div><div class="line">&gt;&gt;K</div><div class="line">&gt;&gt;list(K)</div><div class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</div><div class="line"></div><div class="line">&gt;&gt;list(D.values())</div><div class="line">[1,2,3]</div><div class="line"></div><div class="line">&gt;&gt;list(D.items())</div><div class="line">[(&apos;a&apos;,1), (&apos;b&apos;,2), (&apos;c&apos;, 3)]</div><div class="line"></div><div class="line"></div><div class="line">#python3中字典视图并非创建后不能改变——他们可以动态的反应在视图创建之后对字典做出的修改</div><div class="line">&gt;&gt; D = dict(a=1, b=2, c=3)</div><div class="line">&gt;&gt; K = D.keys()</div><div class="line">&gt;&gt;V = D.values()</div><div class="line">&gt;&gt;list(K)</div><div class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</div><div class="line"></div><div class="line">&gt;&gt;list(V)</div><div class="line">[1,2,3]</div><div class="line"></div><div class="line">&gt;&gt;del D[&apos;a&apos;]</div><div class="line"></div><div class="line">&gt;&gt;list(K)</div><div class="line">[ &apos;b&apos;, &apos;c&apos;]</div><div class="line"></div><div class="line">&gt;&gt;list(V)</div><div class="line">[2,3]</div></pre></td></tr></table></figure>
<h1 id="9-排序字典键"><a href="#9-排序字典键" class="headerlink" title="9.排序字典键"></a>9.排序字典键</h1><p>因为keys不会返回一个list，所以我们要排序，必须要通过手动转换为一个列表的方式，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; D = dict(a=1, b=2, c=3)</div><div class="line">&gt;&gt;ks = list(D.keys())</div><div class="line">ks.sort()                                                            #列表排序</div><div class="line">for k in ks:</div><div class="line">    print(k,D[k])</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; D = dict(a=1, b=2, c=3)</div><div class="line">&gt;&gt;ks = D.keys()</div><div class="line">for k in sorted(ks)                                           #调用排序函数</div><div class="line">    print(k,D[k])</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型之列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型之列表/" itemprop="url">
                  python数据类型之列表
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;列表可以包含任何种类的对象：数字、字符串、其他列表，列表时可变对象，支持在原地修改，常用列表常量和操作</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>L = []</td>
<td>一个空的列表</td>
</tr>
<tr>
<td>L = [0, 1, 2, 3, 4]</td>
<td></td>
</tr>
<tr>
<td>L = [1,3,[4,5]]</td>
<td>列表中嵌套列表</td>
</tr>
<tr>
<td>L = list(‘spam’)</td>
</tr>
<tr>
<td>L[i]</td>
<td>索引某一个元素</td>
</tr>
<tr>
<td>L[i][j]</td>
<td>索引的索引</td>
</tr>
<tr>
<td>L[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(L)</td>
<td>求长度</td>
</tr>
<tr>
<td>L1 + L2</td>
<td>合并</td>
</tr>
<tr>
<td>L * 3</td>
<td>重复</td>
</tr>
<tr>
<td>for x in L : print(x)</td>
<td>迭代</td>
</tr>
<tr>
<td>3 in L</td>
<td>检测</td>
</tr>
<tr>
<td>L.append(4)</td>
<td>增长</td>
</tr>
<tr>
<td>L.extend([4,5,7])</td>
<td></td>
</tr>
<tr>
<td>L.insert(1)</td>
<td>插入</td>
</tr>
<tr>
<td>L.index(“zhansan”)</td>
<td>求索引</td>
</tr>
<tr>
<td>L.sort()</td>
<td>排序</td>
</tr>
<tr>
<td>L.reverse()</td>
<td>反转</td>
</tr>
<tr>
<td>del L[k]</td>
<td>删除</td>
</tr>
<tr>
<td>del L[i:j]</td>
<td>删除一片</td>
</tr>
<tr>
<td>L.pop()</td>
<td>移除最后一个</td>
</tr>
<tr>
<td>L.remove(2)</td>
<td>移除指定的一个</td>
</tr>
<tr>
<td>L[i:j] = []</td>
<td>清空指定的分片</td>
</tr>
<tr>
<td>L[i:j] = [4,5,6]</td>
<td>分片赋值</td>
</tr>
</tbody>
</table>
<h1 id="1-列表的CRUD和其他的操作"><a href="#1-列表的CRUD和其他的操作" class="headerlink" title="1.列表的CRUD和其他的操作"></a>1.列表的CRUD和其他的操作</h1><h2 id="1-1-求列表长度"><a href="#1-1-求列表长度" class="headerlink" title="1.1.求列表长度"></a>1.1.求列表长度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;len([1,3,5])</div><div class="line">3</div></pre></td></tr></table></figure>
<h2 id="1-2-合并列表"><a href="#1-2-合并列表" class="headerlink" title="1.2.合并列表"></a>1.2.合并列表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;[1,2,3] + [4,5,7]</div><div class="line">[1,2,3,4,5,7]</div><div class="line"></div><div class="line">#注意+两边必须是同种类型的序列，否则江湖报错</div><div class="line">&gt;&gt; str([1,3,4]) + &quot;33&quot;</div><div class="line">&apos;1,3,4]33&apos;</div><div class="line"></div><div class="line">&gt;&gt;[1,2] + list(&quot;33&quot;)</div><div class="line">[1,2,3,3]</div></pre></td></tr></table></figure>
<h2 id="1-3-重复"><a href="#1-3-重复" class="headerlink" title="1.3.重复"></a>1.3.重复</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;[&apos;Ni&apos;] * 4</div><div class="line">[&apos;Ni&apos;, &apos;Ni&apos;, &apos;Ni&apos;, &apos;Ni&apos;]</div><div class="line"></div><div class="line">&gt;&gt;res = [c * 4 for c in &apos;spam&apos;]</div><div class="line">&gt;&gt;res </div><div class="line">[&apos;ssss&apos;, &apos;pppp&apos;, &apos;aaaa&apos;, &apos;mmmm&apos;]</div><div class="line">#等价于</div><div class="line">&gt;&gt;res = []</div><div class="line">&gt;&gt;for c in &apos;spam&apos;:</div><div class="line">...    res.append(c * 4)</div><div class="line">&gt;&gt;res</div><div class="line">[&apos;ssss&apos;, &apos;pppp&apos;, &apos;aaaa&apos;, &apos;mmmm&apos;]</div></pre></td></tr></table></figure>
<h2 id="1-4-判断in"><a href="#1-4-判断in" class="headerlink" title="1.4.判断in"></a>1.4.判断in</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; 3 in [1,2,3]</div><div class="line">True</div><div class="line"></div><div class="line">&gt;&gt;for x in [1,2,3]:</div><div class="line">print(x)</div></pre></td></tr></table></figure>
<h2 id="1-5-索引、分片、矩阵"><a href="#1-5-索引、分片、矩阵" class="headerlink" title="1.5.索引、分片、矩阵"></a>1.5.索引、分片、矩阵</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; L = [&apos;spam&apos;, &apos;Spam&apos;, &apos;SPAM&apos;]   </div><div class="line">&gt;&gt; L[2]                                             #索引</div><div class="line">&apos;SPAM&apos;</div><div class="line"></div><div class="line">&gt;&gt;L[1:]                                             #分片</div><div class="line">[ &apos;Spam&apos;, &apos;SPAM&apos;]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;matrix = [[1,2,3], [4,5,6], [7,8,9]]</div><div class="line">&gt;&gt;matrix[1]                                       #矩阵</div><div class="line">[4,5,.6]</div><div class="line"></div><div class="line">&gt;&gt;matrix[1][1]</div><div class="line">5</div></pre></td></tr></table></figure>
<h2 id="1-6-赋值"><a href="#1-6-赋值" class="headerlink" title="1.6.赋值"></a>1.6.赋值</h2><p>当使用列表的时候，可以将它赋值给一个特定项（偏移）或整个片段（分片）来改变他的内容，索引和分片的赋值都是原地修改，他们对列表进行直接修改，而不是·生成一个新的里诶包作为结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; L = [&apos;spam&apos;, &apos;Spam&apos;, &apos;SPAM&apos;]</div><div class="line">&gt;&gt; L[1] = &apos;eggs&apos;                                                   #特定项</div><div class="line">&gt;&gt; L</div><div class="line">[&apos;spam&apos;, &apos;eggs&apos;, &apos;SPAM&apos;]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;L[0:2] = [&apos;eat&apos;, &apos;more&apos;]                                    #整个片段</div><div class="line">&gt;&gt;L</div><div class="line">[&apos;eat&apos;, &apos;more&apos;, &apos;SPAM&apos;]</div></pre></td></tr></table></figure></p>
<p>分片赋值最好分成两步来理解</p>
<ol>
<li>删除，删除等号左边指定的分片</li>
<li>插入，将包含在等号右边对象中的片段插入旧分片被删除的位置<br>实际情况并非如此，但是这有助于我们理解为什么插入元素的数目不需要与删除的数目相匹配，例如：已知一个列表L的值为【1,3,4】，赋值操作L[1:2] = [4,5] 会把L修改成列表【1,4，5,4】,python会先删除3（单项分片），然后在删除3的位置插入4,5，这也解释了为什么L[1:2] = [] 实际上是删除操作——python删除分片，之后什么也不插入</li>
</ol>
<h2 id="1-7-添加append-extend-insert"><a href="#1-7-添加append-extend-insert" class="headerlink" title="1.7.添加append / extend / insert"></a>1.7.添加append / extend / insert</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;L.append(&apos;please&apos;)                            #在末尾添加</div><div class="line">&gt;&gt;L</div><div class="line">[&apos;a&apos;,&apos;b&apos;,&apos;please&apos;]                  </div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; L = [1,3]</div><div class="line">&gt;&gt; L.extend([4,5,6])                           #在末端插入多个元素</div><div class="line">&gt;&gt; L</div><div class="line">[1,3,4,5,6]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;L.insert(1,&quot;toast&quot;)                         #在指定位置插入元素</div><div class="line">&gt;&gt; L</div><div class="line">[1,&apos;toast&apos;,3,4,5,6]</div></pre></td></tr></table></figure>
<h2 id="1-8-排序sort"><a href="#1-8-排序sort" class="headerlink" title="1.8.排序sort"></a>1.8.排序sort</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;L = [&quot;aA&quot;, &quot;dC&quot;,&quot;ab&quot;]</div><div class="line">&gt;&gt;L.sort()                                       #按照字符的ASCII码进行排序</div><div class="line">&gt;&gt;L</div><div class="line">[&quot;aA&quot;,&quot;ab&quot;, &quot;dC&quot;]      </div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt;L.sort(key=str.lower)                   #转化成为小写之后进行排序</div><div class="line">&gt;&gt;L</div><div class="line">[“aA&quot;, &quot;ab&quot;, &quot;dC&quot;]</div><div class="line"></div><div class="line">&gt;&gt;L.sort(key=str.lower，reverse = True)                   #转化成为小写之后，降序排列</div><div class="line">&gt;&gt;L</div><div class="line">[&quot;dc&quot;, &quot;ab&quot;, &quot;aA&quot;]</div><div class="line"></div><div class="line"></div><div class="line">#通过sorted 内置函数可以实现</div><div class="line">&gt;&gt; L = [&apos;abc&apos;, &apos;ABD&apos;,&apos;bBe&apos;]</div><div class="line">&gt;&gt; sorted(L, key=str.lower, reverse = True)</div><div class="line">[&apos;aBe,&apos;ABD, &apos;abc&apos;]</div></pre></td></tr></table></figure>
<p>要当心append和sort原处修改相关的列表对象，而结果并没有返回列表（从技术上来讲，两者返回的是None），如果编辑类似的L=L.append(x）的语句，将不会得到L修改后的值（实际上，会失去整个列表的引用）</p>
<h2 id="1-9-删除pop-remove-del"><a href="#1-9-删除pop-remove-del" class="headerlink" title="1.9.删除pop / remove / del"></a>1.9.删除pop / remove / del</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt; L.pop()                            #删除最后一个元素</div><div class="line">&gt;&gt; L</div><div class="line">[&quot;zhangsan&quot;, &quot;lisi&quot;]</div><div class="line"></div><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt;L.pop(1)                                            #删除指定的元素</div><div class="line">&gt;&gt;L</div><div class="line"> [&quot;zhangsan&quot;,  &quot;wangwu&quot;]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt;L.remove(&quot;zhangsna&quot;)                        #移除  指定值  的元素</div><div class="line">&gt;&gt;L</div><div class="line">[&quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt; del L[0]                                             #删除指定的元素</div><div class="line">&gt;&gt; L</div><div class="line">[&quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line"></div><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt;del L[1:]                                          #删除指定的分片</div><div class="line">&gt;&gt;L</div><div class="line"> [&quot;zhangsan&quot;]</div><div class="line"></div><div class="line"></div><div class="line">&gt;&gt; L = [&quot;zhangsan&quot;, &quot;lisi&quot;, &quot;wangwu&quot;]</div><div class="line">&gt;&gt; L[1:] = []                                         #清空指定的分片</div><div class="line">&gt;&gt;L</div><div class="line"> [&quot;zhangsan&quot;]</div></pre></td></tr></table></figure>
<h2 id="1-10-反转"><a href="#1-10-反转" class="headerlink" title="1.10.反转"></a>1.10.反转</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; L = [1,2,3]</div><div class="line">&gt;&gt;L.reverse()</div><div class="line">&gt;&gt;L</div><div class="line">[3,2.1]</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据类型之元组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据类型之元组/" itemprop="url">
                  python数据类型之元组
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>元组与列表类似，只不过元组不能在原处修改，并且写成圆括号中的一系列项，其具有如下属性：</p>
<ul>
<li>任意对象的有序集合<br>元组是一个位置有序的对象的集合，可以嵌入到任何类别 的对象中</li>
<li>通过偏移存取<br>因为他们支持偏移的操作，所以有：索引和分片</li>
<li>属于不可变序列类型<br>不支持在原处进行修改</li>
<li>固定长度、异构、任意嵌套<br>因为元组的长度是不可变的，在不生成一个拷贝的情况下不能增长或缩短，另一方面，元组可以包含其他的复合对象（如：列表、字典、其他元组等），因为支持嵌套</li>
<li>对象引用的数组</li>
</ul>
<p>常见的元组常量和运算</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>（）</td>
<td>空元组</td>
</tr>
<tr>
<td>T = (0,)</td>
<td>单个元素的元组</td>
</tr>
<tr>
<td>T = (1,’ni’,3,4)</td>
<td>四个元素的元组</td>
</tr>
<tr>
<td>T = 0,’ni’,3,4</td>
<td>另一个四个元素的元组</td>
</tr>
<tr>
<td>T = (‘abc’, (‘def’, ‘ghi’))</td>
<td>嵌套元组</td>
</tr>
<tr>
<td>T = tuple(‘spam’)</td>
<td></td>
</tr>
<tr>
<td>T[i]</td>
<td>索引</td>
</tr>
<tr>
<td>T[i][j]</td>
<td>索引的索引</td>
</tr>
<tr>
<td>T[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(T)</td>
<td>求长度</td>
</tr>
<tr>
<td>T1 + T2</td>
<td>合并</td>
</tr>
<tr>
<td>T * 3</td>
<td>重复</td>
</tr>
<tr>
<td>for x in T : print(x)</td>
<td>遍历</td>
</tr>
<tr>
<td>’spam’ in T</td>
<td>检查</td>
</tr>
<tr>
<td>[x ** 2 for x in T]</td>
<td></td>
</tr>
<tr>
<td>T.index(‘ni’)</td>
<td>索引下标</td>
</tr>
<tr>
<td>T.count(‘ni’)</td>
<td>统计计数</td>
</tr>
</tbody>
</table>
<h1 id="1-合并"><a href="#1-合并" class="headerlink" title="1.合并"></a>1.合并</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; (1,3) + (2,4)</div><div class="line">(1,3,2,4)</div></pre></td></tr></table></figure>
<h1 id="2-重复"><a href="#2-重复" class="headerlink" title="2.重复*"></a>2.重复*</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;(1,3)*4             =========&gt; (1,3)+(1,3)+(1,3)+(1,3)</div><div class="line">(1,3,1,3,1,3,1,3)</div></pre></td></tr></table></figure>
<h1 id="3-切片"><a href="#3-切片" class="headerlink" title="3.切片"></a>3.切片</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;T = (1,2,3,4)</div><div class="line">&gt;&gt;T[0] ,T[1:3]</div><div class="line">(1,(2,3))</div></pre></td></tr></table></figure>
<h1 id="4-逗号和圆括号"><a href="#4-逗号和圆括号" class="headerlink" title="4.逗号和圆括号"></a>4.逗号和圆括号</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;x = (40)               #（）表示四则运算的基本元素，所以此时只是为整数40加上了括号</div><div class="line">&gt;&gt;x</div><div class="line">40</div><div class="line"></div><div class="line">&gt;&gt;y = (40,)                #表示元组，之所以加上逗号，就是为了区分整数40的原因</div><div class="line">&gt;&gt;y </div><div class="line">(40,)</div></pre></td></tr></table></figure>
<h1 id="5-排序"><a href="#5-排序" class="headerlink" title="5.排序"></a>5.排序</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;T = (&apos;cc&apos;,&apos;aa&apos;,&apos;dd&apos;,&apos;bb&apos;)</div><div class="line">&gt;&gt;tmp = list(T)</div><div class="line">&gt;&gt;tmp.sort()</div><div class="line">&gt;&gt;tmp</div><div class="line">[&apos;aa&apos;,&apos;bb&apos;,&apos;cc&apos;,&apos;dd&apos;]</div><div class="line"></div><div class="line">&gt;&gt;T = tuple(tmp)</div><div class="line">&gt;&gt;T</div><div class="line">(&apos;aa&apos;,&apos;bb&apos;,&apos;cc&apos;,&apos;dd&apos;)</div><div class="line"></div><div class="line"></div><div class="line">#另外一种方式</div><div class="line">&gt;&gt;sorted(T)</div><div class="line">[&apos;aa&apos;,&apos;bb&apos;,&apos;cc&apos;,&apos;dd&apos;]</div></pre></td></tr></table></figure>
<h1 id="6-索引下标"><a href="#6-索引下标" class="headerlink" title="6.索引下标"></a>6.索引下标</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;T = (1,2,3,2,4,2)</div><div class="line">&gt;&gt; T.index(2)               #第一次出现“2”时的偏移</div><div class="line">1</div><div class="line">&gt;&gt;T.index(2,2)</div><div class="line">3</div></pre></td></tr></table></figure>
<h1 id="7-统计计数"><a href="#7-统计计数" class="headerlink" title="7.统计计数"></a>7.统计计数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;T = (1,2,3,2,4,2)</div><div class="line">&gt;&gt;T.count(2)                           #统计出现的次数</div><div class="line">3</div></pre></td></tr></table></figure>
<h1 id="8-“改变”元组"><a href="#8-“改变”元组" class="headerlink" title="8. “改变”元组"></a>8. “改变”元组</h1><p>元组的不可变形<font color="red">只适用于元组本身顶层</font>而并非其内容，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; T = (1,[2,3],4)</div><div class="line">&gt;&gt; T[1] = &apos;spam&apos;</div><div class="line">TypeError:ojbect doesn&apos;t support item assignment</div><div class="line"></div><div class="line">&gt;&gt;T[1][0] = &apos;spam&apos;</div><div class="line">&gt;&gt;T</div><div class="line">(1,[&apos;spam&apos;,3], 4)</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据库之sqlite数据库简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据库之sqlite数据库简介/" itemprop="url">
                  python数据库之sqlite数据库简介
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><p>SQLite是一种<font color="red">嵌入式数据库</font>，<font color="red">它的数据库就是一个文件</font>。由于SQLite本身是C写的，而且体积很小，所以，经常被集成到各种应用程序中，甚至在iOS和Android的App中都可以集成。</p>
<h1 id="2-特点"><a href="#2-特点" class="headerlink" title="2.特点"></a>2.特点</h1><ul>
<li><font color="green">不需要一个单独的服务器进程或操作的系统（无服务器的）</font>。</li>
<li><font color="green">SQLite 不需要配置，这意味着不需要安装或管理</font>。</li>
<li>一个完整的 SQLite 数据库是存储在一个单一的跨平台的<font color="green">磁盘文件</font>。</li>
<li>SQLite 是非常小的，是轻量级的，完全配置时小于 400KiB，省略可选功能配置时小于250KiB。</li>
<li>SQLite 是自给自足的，这意味着不需要任何外部的依赖。</li>
<li>SQLite 事务是完全兼容 ACID 的，允许从多个进程或线程安全访问。</li>
<li>SQLite 支持 SQL92（SQL2）标准的大多数查询语言的功能。</li>
<li>SQLite 使用 ANSI-C 编写的，并提供了简单和易于使用的 API。</li>
<li>SQLite 可在 UNIX（Linux, Mac OS-X, Android, iOS）和 Windows（Win32, WinCE, WinRT）中运行。</li>
</ul>
<h1 id="3-参考教程"><a href="#3-参考教程" class="headerlink" title="3.参考教程"></a>3.参考教程</h1><p><a href="http://www.runoob.com/sqlite/sqlite-tutorial.html" target="_blank" rel="external">http://www.runoob.com/sqlite/sqlite-tutorial.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据库之sqlite3模块/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据库之sqlite3模块/" itemprop="url">
                  python数据库之sqlite3模块
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-使用步骤"><a href="#1-使用步骤" class="headerlink" title="1.使用步骤"></a>1.使用步骤</h1><p>Python就内置了SQLite3，所以，在Python中使用SQLite，不需要安装任何东西，直接使用。</p>
<ol>
<li>导入sqlite3模块</li>
<li>连接数据库<ul>
<li>sqlite3.connect(“数据库文件路径及其文件”)</li>
<li>sqlite3.connect(“:memory:”)   —— 内存数据库</li>
<li>以上将返回数据库连接对象</li>
</ul>
</li>
<li>用游标对象方法操作数据库<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cursor.execute()</div><div class="line">cursor.executemany()</div><div class="line">cursor.executescript()</div><div class="line">cursor.fetchone()</div><div class="line">cursor.fetchall()</div><div class="line">cursor.fetchmany()</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>提交事务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">con.commit()</div><div class="line">con.rollback()</div></pre></td></tr></table></figure>
</li>
<li><p>关闭连接 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">con.close()</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="2-实现简单的CRUD"><a href="#2-实现简单的CRUD" class="headerlink" title="2.实现简单的CRUD"></a>2.实现简单的CRUD</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">create table_name(col_name_type,......)               #创建表</div><div class="line">insert into table_name(cola,colb...) vlaues(...)       #插入数据</div><div class="line">select * from table_name                             #查询数据</div><div class="line">update table set .....  where ........                  #更新数据</div><div class="line">delete  from  table_name  where .......               #删除数据</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">from sqlite3 import connect</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line"># cur.execute(&apos;create table star(id integer,name text,age integer,address text)&apos;)                        #创建表</div><div class="line"> </div><div class="line"># rows = [(1,&quot;王俊凯&quot;,16,&quot;重庆&quot;),(2,&quot;王源&quot;,15,&quot;重庆&quot;),(3,&quot;易烊千玺&quot;,15,&quot;怀化&quot;)]</div><div class="line"># for item in rows:</div><div class="line">#     cur.execute(&quot;insert into star (id,name,age,address) values (?,?,?,?)&quot;,item)                #插入数据</div><div class="line"> </div><div class="line"># cur.execute(&apos;select * from star&apos;)                                         #查询数据</div><div class="line"># for row in cur:</div><div class="line">#     print(row)</div><div class="line"> </div><div class="line"># cur.execute(&apos;update star set age=? where id=?&apos;,(16,3))                      #更新数据</div><div class="line"># cur.execute(&apos;select * from star&apos;)</div><div class="line"># for row in cur:</div><div class="line">#     print(row)</div><div class="line">cur.execute(&apos;delete from star where id=?&apos;,(3,))                                  #删除数据</div><div class="line">cur.execute(&apos;select * from star&apos;)</div><div class="line">for row in cur:</div><div class="line">    print(row)</div><div class="line"> </div><div class="line">con.commit()</div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="3-行对象（Row）简介"><a href="#3-行对象（Row）简介" class="headerlink" title="3.行对象（Row）简介"></a>3.行对象（Row）简介</h1><h2 id="3-1-支持的操作"><a href="#3-1-支持的操作" class="headerlink" title="3.1.支持的操作"></a>3.1.支持的操作</h2><ul>
<li>以列名访问</li>
<li>以索引号访问</li>
<li>迭代访问</li>
<li>len()操作</li>
</ul>
<h2 id="3-2-游标建立前"><a href="#3-2-游标建立前" class="headerlink" title="3.2.游标建立前"></a>3.2.游标建立前</h2><p>conn.row_factory = sqlite3.Row</p>
<h2 id="3-3-程序实现"><a href="#3-3-程序实现" class="headerlink" title="3.3.程序实现"></a>3.3.程序实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> from sqlite3 import connect,Row</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">con.row_factory = Row                                    #设置</div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">cur.execute(&apos;select * from star&apos;)</div><div class="line">row = cur.fetchone()</div><div class="line"> </div><div class="line">print(type(row))</div><div class="line"> </div><div class="line">print(&apos;以列名访问：&apos;,row[&apos;name&apos;])                        #以列名访问</div><div class="line"> </div><div class="line">print(&apos;以索引号访问：&apos;,row[1])                    #以索引号访问</div><div class="line"> </div><div class="line">print(&apos;以迭代的访问：&apos;)</div><div class="line">for item in row:</div><div class="line">    print(item)</div><div class="line"> </div><div class="line">print(&quot;len():&quot;,len(row))</div><div class="line"> </div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="4-批量数据库操作"><a href="#4-批量数据库操作" class="headerlink" title="4.批量数据库操作"></a>4.批量数据库操作</h1><blockquote>
<p>cur.executemany(sql_string,seq)</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">from sqlite3 import connect,Row</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">con.row_factory = Row</div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">rows = [(14,&apos;Lily&apos;,12,&apos;BeiJing&apos;),(6,&apos;John&apos;,13,&quot;ChongQing&quot;)]</div><div class="line">cur.executemany(&apos;insert into star (id,name,age,address) values (?,?,?,?)&apos;,rows)        #rows 一个列表的参数</div><div class="line">cur.execute(&apos;select * from star&apos;)</div><div class="line"> </div><div class="line">for row in cur:</div><div class="line">    for r in row:</div><div class="line">        print(r)</div><div class="line"> </div><div class="line">con.commit()</div><div class="line"> </div><div class="line"> </div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="5-批量执行脚本"><a href="#5-批量执行脚本" class="headerlink" title="5.批量执行脚本"></a>5.批量执行脚本</h1><blockquote>
<p>cur.executescript(sql_string)</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">from sqlite3 import connect</div><div class="line">db_name = &apos;testb.db&apos;</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">sql_str = &quot;&quot;&quot;</div><div class="line">create table test(id integer,name text);</div><div class="line">insert into test (id,name) values (1,&apos;Lily&apos;);</div><div class="line">insert into test (id,name) values (2,&apos;Green&apos;);</div><div class="line">&quot;&quot;&quot;</div><div class="line">cur.executescript(sql_str)                            #批量执行</div><div class="line"> </div><div class="line">cur.execute(&apos;select * from test&apos;)</div><div class="line">for item in cur:</div><div class="line">    print(item)</div><div class="line"> </div><div class="line">con.commit()</div><div class="line">  </div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="6-自定义函数——创建基本函数"><a href="#6-自定义函数——创建基本函数" class="headerlink" title="6.自定义函数——创建基本函数"></a>6.自定义函数——创建基本函数</h1><blockquote>
<p>con.create_function(name,params_num,func_name)</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">from sqlite3 import connect,Row</div><div class="line">import binascii</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">def encrypt(mydata):</div><div class="line">    crc = str(binascii.crc32(mydata.encode()))</div><div class="line">    while len(crc) &lt; 10:</div><div class="line">        crc = &apos;0&apos;+ crc</div><div class="line">    return mydata + crc</div><div class="line"> </div><div class="line">def check(mydata):</div><div class="line">    if len(mydata) &lt; 11:</div><div class="line">        return None</div><div class="line">    crc_res = str(binascii.crc32(mydata[:-10].encode()))</div><div class="line">    while len(crc_res) &lt; 10:</div><div class="line">        crc_res = &apos;0&apos;+ crc_res</div><div class="line">    if crc_res == mydata[-10:]:</div><div class="line">        return mydata[:-10]</div><div class="line"> </div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">con.create_function(&apos;checkk&apos;,1,check)                            #checkk 是注册函数的名字，注册了之后可以在sql语句中使用的，check是对应的执行的函数（实际就是执行的这个函数）</div><div class="line"> </div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">sql_scrpit = &quot;&quot;&quot;</div><div class="line">drop table if exists testa;</div><div class="line">create table if not exists testa(id integer,name text);</div><div class="line">insert into testa (id,name) values (3,&quot;%s&quot;);</div><div class="line">insert into testa (id,name) values (4,&quot;%s&quot;);</div><div class="line">&quot;&quot;&quot;</div><div class="line">names = [&apos;Lily&apos;,&apos;Green&apos;]</div><div class="line">names = tuple(encrypt(i) for i in names)</div><div class="line">sql_scrpit = sql_scrpit % names</div><div class="line">print(sql_scrpit)</div><div class="line">cur.executescript(sql_scrpit)</div><div class="line"> </div><div class="line">cur.execute(&apos;select id,checkk(name) from testa&apos;)                #调用注册的函数</div><div class="line">for item in cur:</div><div class="line">    print(item)</div><div class="line"> </div><div class="line">cur.execute(&apos;update testa set name=? where id=?&apos;,(&apos;dfddkkjd1122334455&apos;,4))</div><div class="line">cur.execute(&apos;select id,checkk(name) from testa&apos;)</div><div class="line">for item in cur:</div><div class="line">    print(item)</div><div class="line"> </div><div class="line">con.commit()</div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="7-自定义函数——创建聚合函数"><a href="#7-自定义函数——创建聚合函数" class="headerlink" title="7.自定义函数——创建聚合函数"></a>7.自定义函数——创建聚合函数</h1><ul>
<li>实现一些方法的一个自定义类<br> con.create_aggregate(name,params_num,class_name)</li>
<li>协议方法<br>  step()<br>  finalize()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#求绝对值和</div><div class="line">from sqlite3 import connect,Row</div><div class="line">import binascii</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">class AbsSum:</div><div class="line">    def __init__(self):</div><div class="line">        self.s = 0</div><div class="line">    def step(self,v):</div><div class="line">        self.s += abs(v)</div><div class="line">    def finalize(self):</div><div class="line">        return self.s</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">con.create_aggregate(&apos;abssum&apos;,1,AbsSum)</div><div class="line"> </div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">sql_scrpit = &quot;&quot;&quot;</div><div class="line">drop table if exists testa;</div><div class="line">create table if not exists testa(id integer,name text,score integer);</div><div class="line">insert into testa (id,name,score) values (3,&quot;Lily&quot;,8);</div><div class="line">insert into testa (id,name,score) values (4,&quot;Jhon&quot;,-7);</div><div class="line">&quot;&quot;&quot;</div><div class="line">cur.executescript(sql_scrpit)</div><div class="line"> </div><div class="line">cur.execute(&apos;select abssum(score) from testa&apos;)</div><div class="line">for item in cur:</div><div class="line">    print(item)</div><div class="line"> </div><div class="line">con.commit()</div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="8-数据类型转换"><a href="#8-数据类型转换" class="headerlink" title="8.数据类型转换"></a>8.数据类型转换</h1><p>python    sqlite<br>None    NULL<br>str    text<br>int    integer<br>bytes    blob</p>
<h1 id="9-保存文件至数据库"><a href="#9-保存文件至数据库" class="headerlink" title="9.保存文件至数据库"></a>9.保存文件至数据库</h1><ul>
<li>execute(“insert into t values(?) “, (f.read()))</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">from sqlite3 import connect,Row,Binary</div><div class="line">import binascii</div><div class="line"> </div><div class="line">db_name = &apos;test.db&apos;</div><div class="line"> </div><div class="line">con = connect(db_name)</div><div class="line">cur = con.cursor()</div><div class="line"> </div><div class="line">sql_scrpit = &quot;&quot;&quot;</div><div class="line">drop table if exists testa;</div><div class="line">create table if not exists testa(id integer,data blob);</div><div class="line">&quot;&quot;&quot;</div><div class="line">cur.executescript(sql_scrpit)</div><div class="line"> </div><div class="line">f = open(&apos;test.jpg&apos;,&apos;rb&apos;)</div><div class="line"> </div><div class="line">cur.execute(&apos;insert into testa (id,data) values (3,?)&apos;,(f.read(),))</div><div class="line"> </div><div class="line">cur.execute(&apos;select * from testa where id=3&apos;)</div><div class="line">record = cur.fetchone()</div><div class="line">f = open(&apos;tt.jpg&apos;,&quot;wb+&quot;)</div><div class="line">f.write(record[1])</div><div class="line">f.close()</div><div class="line"></div><div class="line">con.commit()</div><div class="line">con.close()</div></pre></td></tr></table></figure>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><p>关于：联系人和分组的增删改查<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">import sqlite3</div><div class="line">from sqlite3 import connect</div><div class="line"> </div><div class="line">class MySqliteDb(object):</div><div class="line">    &quot;&quot;&quot;Sqlite3 Db Class&quot;&quot;&quot;</div><div class="line">    def __init__(self, dbname=&quot;address.db&quot;):</div><div class="line">        self.dbname = dbname</div><div class="line">        self.con = None</div><div class="line">        self.curs = None</div><div class="line"> </div><div class="line">    def getCursor(self):</div><div class="line">        self.con = sqlite3.connect(self.dbname)</div><div class="line">        if self.con:</div><div class="line">            self.curs = self.con.cursor()</div><div class="line"> </div><div class="line">    def closeDb(self):</div><div class="line">        if self.curs:</div><div class="line">            self.curs.close()</div><div class="line">        if self.con:</div><div class="line">            self.con.commit()</div><div class="line">            self.con.close()</div><div class="line"> </div><div class="line">    def __enter__(self):</div><div class="line">        self.getCursor()</div><div class="line">        return self.curs</div><div class="line"> </div><div class="line">    def __exit__(self, exc_type, exc_val, exc_tb):</div><div class="line">        if exc_val:</div><div class="line">            print(&quot;Exception has generate: &quot;,exc_val)</div><div class="line">            print(&quot;Sqlite3 execute error!&quot;)</div><div class="line">        self.closeDb()</div><div class="line"> </div><div class="line">def initDb():</div><div class="line">    sql_script = &apos;&apos;&apos;</div><div class="line">        create table contact</div><div class="line">        (id integer primary key autoincrement not null,</div><div class="line">        name varchar(20) not null,</div><div class="line">        home_tel varchar(20),</div><div class="line">        office_tel varchar(20),</div><div class="line">        mobile_phone varchar(20),</div><div class="line">        memo text);</div><div class="line">        create table mygroup(</div><div class="line">        id integer primary key autoincrement not null,</div><div class="line">        name  varchar(20) not null,</div><div class="line">        memo text);</div><div class="line">        create table con_gro(</div><div class="line">        cid integer not null,</div><div class="line">        gid integer not null,</div><div class="line">        FOREIGN KEY(cid) REFERENCES contact(id),</div><div class="line">        FOREIGN KEY(gid) REFERENCES mygroup(id)</div><div class="line">            );</div><div class="line">        &apos;&apos;&apos;</div><div class="line">    if not os.path.exists(&apos;address.db&apos;):</div><div class="line">        with MySqliteDb() as db:</div><div class="line">            db.executescript(sql_script)</div><div class="line"> </div><div class="line">class Contact:</div><div class="line">    def __init__(self,name=&apos;&apos;,home_tel=&apos;&apos;,office_tel=&apos;&apos;,mobile_phone=&apos;&apos;,memo=&apos;&apos;):</div><div class="line">        self.id = -1</div><div class="line">        self.name = name</div><div class="line">        self.home_tel = home_tel</div><div class="line">        self.office_tel = office_tel</div><div class="line">        self.mobile_phone = mobile_phone</div><div class="line">        self.memo = memo</div><div class="line">        self.gid = None</div><div class="line">        self.keys = (&apos;home_tel&apos;,&apos;office_tel&apos;,&apos;mobile_phone&apos;,&apos;memo&apos;)</div><div class="line">        self.__change()</div><div class="line"> </div><div class="line">    def save(self):</div><div class="line">        if self.id == -1:</div><div class="line">            param_dicts = &#123;k:getattr(self,k) for k in self.keys if getattr(self,k)&#125;</div><div class="line">            keys = tuple(k for k in self.keys if k in param_dicts)</div><div class="line">            quotes = &apos;,&apos;.join((&apos;?&apos; for i in range(len(param_dicts))))</div><div class="line">            param_tuple = [self.name,]</div><div class="line">            for key in keys:</div><div class="line">                param_tuple.append(param_dicts[key])</div><div class="line">            param_tuple = tuple(param_tuple)</div><div class="line">            sql = &quot;insert into contact (name,%s) values (?,%s)&quot; % (&apos;,&apos;.join(keys),quotes)</div><div class="line">            if self.name:</div><div class="line">                try:</div><div class="line">                    with MySqliteDb() as db:</div><div class="line">                        db.execute(sql,param_tuple)</div><div class="line">                        res = db.execute(&apos;select id from contact where name=?&apos;,(self.name,))</div><div class="line">                        res = res.fetchone()</div><div class="line">                        self.id = res[0]</div><div class="line">                    return True</div><div class="line">                except:</div><div class="line">                    print(&quot;保存失败，请检查服务器！&quot;)</div><div class="line">            else:</div><div class="line">                print(&quot;姓名不能为空！&quot;)</div><div class="line">                return False</div><div class="line">        else:</div><div class="line">            return self.update()</div><div class="line"> </div><div class="line">    def update(self):</div><div class="line">        sql = &quot;update contact set %s=? where id=?&quot;</div><div class="line">        chgs = &#123;k:getattr(self,k) for k in self.keys \</div><div class="line">                if getattr(self,k) and getattr(self,k) != self.vals.get(k)&#125;</div><div class="line">        if not chgs:</div><div class="line">            return</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                for k,v in chgs.items():</div><div class="line">                    db.execute(sql % k,(v,self.id))</div><div class="line">            self.__change()</div><div class="line">            return True</div><div class="line">        except:</div><div class="line">            print(&quot;更新失败！&quot;)</div><div class="line">            return False</div><div class="line"> </div><div class="line">    def load(self,id):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                res = db.execute(&apos;select * from contact where id=?&apos;,(id,))</div><div class="line">                res = res.fetchone()</div><div class="line">                self.name = res[1]</div><div class="line">                self.id = id</div><div class="line">                for i,v in enumerate(res[2:]):</div><div class="line">                    setattr(self,self.keys[i-2],v)</div><div class="line">            self.__change()</div><div class="line">            return True</div><div class="line">        except:</div><div class="line">            print(&apos;数据载入失败！&apos;)</div><div class="line"> </div><div class="line"> </div><div class="line">    def load_from_name(self):</div><div class="line">        if self.name:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    res = db.execute(&apos;select * from contact where name=?&apos;,(self.name,))</div><div class="line">                    res = res.fetchone()</div><div class="line">                    self.id = res[0]</div><div class="line">                    for i,v in enumerate(res[2:]):</div><div class="line">                        setattr(self,self.keys[i-2],v)</div><div class="line">                self.__change()</div><div class="line">                return True</div><div class="line">            except:</div><div class="line">                print(&apos;数据载入失败！&apos;)</div><div class="line"> </div><div class="line">    def get_by_name(self,name):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                res = db.execute(&apos;select * from contact where name=?&apos;,(name,))</div><div class="line">                res = res.fetchall()</div><div class="line">            return res</div><div class="line">        except:</div><div class="line">            print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">    def delete(self):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                db.execute(&apos;delete from contact where id=?&apos;,(self.id,))</div><div class="line">                db.execute(&apos;delete from con_gro where cid=?&apos;,(self.id,))</div><div class="line">            return True</div><div class="line">        except:</div><div class="line">            print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">    def all(self):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                res = db.execute(&apos;select * from contact&apos;)</div><div class="line">                res = res.fetchall()</div><div class="line">            return res</div><div class="line">        except:</div><div class="line">            print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">    def add_to_group(self,gid):</div><div class="line">        if gid and self.id != -1:</div><div class="line">            self.gid = gid</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    db.execute(&apos;insert into con_gro (cid,gid) values (?,?)&apos;,(self.id,gid))</div><div class="line">                return True</div><div class="line">            except:</div><div class="line">                print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">    def __change(self):</div><div class="line">        self.vals = &#123;k:getattr(self,k) for k in self.keys&#125;</div><div class="line"> </div><div class="line">class Group:</div><div class="line">    def __init__(self,name=&apos;&apos;,memo=&apos;&apos;):</div><div class="line">        self.id = -1</div><div class="line">        self.name = name</div><div class="line">        self.memo =memo</div><div class="line">        self.contacts = []</div><div class="line"> </div><div class="line">    def save(self):</div><div class="line">        if self.name and self.id == -1:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    db.execute(&apos;insert into mygroup (name,memo) values (?,?)&apos;,(self.name,self.memo))</div><div class="line">                    res = db.execute(&apos;select id from mygroup where name=?&apos;,(self.name,))</div><div class="line">                    self.id = res.fetchone()[0]</div><div class="line">                    return True</div><div class="line">            except:</div><div class="line">                print(&quot;数据查询失败！&quot;)</div><div class="line">        if self.name and self.id != -1:</div><div class="line">            return self.update()</div><div class="line"> </div><div class="line">    def update(self):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                db.execute(&apos;update mygroup set name=?,memo=? where id=?&apos;,(self.name,self.memo,self.id))</div><div class="line">                return True</div><div class="line">        except:</div><div class="line">            print(&quot;数据更新失败！&quot;)</div><div class="line"> </div><div class="line">    def load(self,id):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                res = db.execute(&apos;select * from mygroup where id=?&apos;,(id,))</div><div class="line">                res = res.fetchone()</div><div class="line">                self.id = id</div><div class="line">                self.name = res[1]</div><div class="line">                self.memo = res[2]</div><div class="line">        except:</div><div class="line">            pass</div><div class="line"> </div><div class="line">    def delete(self):</div><div class="line">        if self.id != -1:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    db.execute(&apos;delete from mygroup where id=?&apos;,(self.id,))</div><div class="line">                    db.execute(&apos;delete from con_gro where gid=?&apos;,(self.id,))</div><div class="line">                    return True</div><div class="line">            except:</div><div class="line">                print(&quot;数据查询失败！&quot;)</div><div class="line"> </div><div class="line">    def load_from_name(self):</div><div class="line">        if self.name:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    res = db.execute(&apos;select * from mygroup where name=?&apos;,(self.name,))</div><div class="line">                    res = res.fetchone()</div><div class="line">                    self.id = res[0]</div><div class="line">                    self.memo = res[2]</div><div class="line">            except:</div><div class="line">                pass</div><div class="line"> </div><div class="line">    def all(self):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                res = db.execute(&apos;select * from mygroup&apos;)</div><div class="line">                return res.fetchall()</div><div class="line">        except:</div><div class="line">            print(&quot;数据查询失败！&quot;)</div><div class="line"> </div><div class="line">    def add_contact(self,cid):</div><div class="line">        if cid and self.id != -1:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    db.execute(&apos;insert into con_gro (cid,gid) values (?,?)&apos;,(cid,self.id))</div><div class="line">                return True</div><div class="line">            except:</div><div class="line">                print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">    def del_contact(self,cid):</div><div class="line">        try:</div><div class="line">            with MySqliteDb() as db:</div><div class="line">                db.execute(&apos;delete from con_gro where cid=? and gid=?&apos;,(cid,self.id))</div><div class="line">            return True</div><div class="line">        except:</div><div class="line">            pass</div><div class="line"> </div><div class="line">    def all_contacts(self):</div><div class="line">        # return objects of members</div><div class="line">        if self.id != -1:</div><div class="line">            try:</div><div class="line">                with MySqliteDb() as db:</div><div class="line">                    cts = []</div><div class="line">                    cids = db.execute(&apos;select cid from con_gro where gid=?&apos;,(self.id,))</div><div class="line">                    cids = cids.fetchall()</div><div class="line">                    for cid in cids:</div><div class="line">                        c = Contact()</div><div class="line">                        c.load(cid[0])</div><div class="line">                        cts.append(c)</div><div class="line">                return cts</div><div class="line">            except:</div><div class="line">                print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line">def info():</div><div class="line">    sqls = [</div><div class="line">        &apos;select * from contact&apos;,</div><div class="line">        &apos;select * from mygroup&apos;,</div><div class="line">        &apos;select * from con_gro&apos;,</div><div class="line">    ]</div><div class="line">    try:</div><div class="line">        with MySqliteDb() as db:</div><div class="line">            for sql in sqls:</div><div class="line">                res = db.execute(sql)</div><div class="line">                res = res.fetchall()</div><div class="line">                for r in res:</div><div class="line">                    print(r)</div><div class="line">    except:</div><div class="line">        print(&apos;数据查询失败！&apos;)</div><div class="line"> </div><div class="line"> </div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    cts = [</div><div class="line">        &#123;&apos;name&apos;:&apos;Lily&apos;,&apos;home_tel&apos;:&apos;0551-98789233&apos;,&apos;memo&apos;:&quot;安徽&quot;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;Bob&apos;,&apos;office_tel&apos;:&apos;021-94679233&apos;,&apos;memo&apos;:&quot;上海&quot;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;Mike&apos;,&apos;mobile_phone&apos;:&apos;18298781089&apos;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;John&apos;,&apos;home_tel&apos;:&apos;010-57989043&apos;,&apos;memo&apos;:&quot;北京&quot;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;Green&apos;,&apos;mobile_phone&apos;:&apos;13908707652&apos;,&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;Tom&apos;,&apos;mobile_phone&apos;:&apos;13109008759&apos;&#125;,</div><div class="line">    ]</div><div class="line"> </div><div class="line">    gps = [</div><div class="line">        &#123;&quot;name&quot;:&apos;朋友&apos;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&apos;家人&apos;&#125;,</div><div class="line">        &#123;&apos;name&apos;:&quot;学生&quot;&#125;,</div><div class="line">    ]</div><div class="line"> </div><div class="line">    print(&apos;初始化数据库……&apos;)</div><div class="line">    initDb()</div><div class="line">    print(&apos;插入数据……&apos;)</div><div class="line">    for ct in cts:</div><div class="line">        Contact(**ct).save()</div><div class="line"> </div><div class="line">    for gp in gps:</div><div class="line">        Group(**gp).save()</div><div class="line"> </div><div class="line">    print(&apos;从数据库中查询到的数据……&apos;)</div><div class="line">    info()</div><div class="line"> </div><div class="line">    print(&apos;查询联系人，并添加到组2……&apos;)</div><div class="line">    ct = Contact(name=&apos;Tom&apos;)</div><div class="line">    ct.load_from_name()</div><div class="line">    print(ct.id,ct.name)</div><div class="line">    ct.add_to_group(2)</div><div class="line"> </div><div class="line">    cta = Contact()</div><div class="line">    cta.load(1)</div><div class="line">    print(cta.id,cta.name)</div><div class="line">    cta.add_to_group(1)</div><div class="line"> </div><div class="line">    ctb = Contact()</div><div class="line">    ctb.load(3)</div><div class="line">    print(ctb.id,ctb.name)</div><div class="line">    ctb.add_to_group(2)</div><div class="line"> </div><div class="line">    ctb = Contact()</div><div class="line">    ctb.load(5)</div><div class="line">    print(ctb.id,ctb.name)</div><div class="line">    ctb.add_to_group(2)</div><div class="line">    info()</div><div class="line"> </div><div class="line">    print(&quot;查询所有联系人：&quot;)</div><div class="line">    for r in Contact().all():</div><div class="line">        print(r)</div><div class="line"> </div><div class="line">    print(&quot;查询所有组：&quot;)</div><div class="line">    for r in Group().all():</div><div class="line">        print(r)</div><div class="line"> </div><div class="line">    print(&quot;查询指定组的成员：&quot;)</div><div class="line">    gp = Group(name=&apos;家人&apos;)</div><div class="line">    gp.load_from_name()</div><div class="line">    print(gp.id,gp.name)</div><div class="line"> </div><div class="line">    print(&quot;通过组添加成员：&quot;)</div><div class="line">    gp.add_contact(4)</div><div class="line"> </div><div class="line">    cts = gp.all_contacts()</div><div class="line">    for ct in cts:</div><div class="line">        print(ct.id,ct.name)</div><div class="line"> </div><div class="line">    print(&quot;删除组成员：&quot;)</div><div class="line">    gp.del_contact(5)</div><div class="line">    info()</div><div class="line"> </div><div class="line">    print(&quot;删除联系人：&quot;)</div><div class="line">    ct = Contact()</div><div class="line">    ct.load(5)</div><div class="line">    ct.delete()</div><div class="line">    info()</div><div class="line"> </div><div class="line">    print(&quot;删除组：&quot;)</div><div class="line">    gp = Group()</div><div class="line">    gp.load(2)</div><div class="line">    gp.delete()</div><div class="line"> </div><div class="line">    info()</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/16/python/python数据库之python DB API 2.0简绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr. Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chen's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/16/python/python数据库之python DB API 2.0简绍/" itemprop="url">
                  python数据库之python DB API 2.0简绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-16T12:47:25+08:00">
                2017-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-目的"><a href="#1-目的" class="headerlink" title="1.目的"></a>1.目的</h1><ul>
<li>统一数据库操作的界面</li>
<li>切换后台数据库时，几乎不用更改数据库操作的有关代码</li>
<li>官网：<a href="https://www.python.org/dev/peps/pep-0249/" target="_blank" rel="external">https://www.python.org/dev/peps/pep-0249/</a></li>
</ul>
<h1 id="2-连接对象"><a href="#2-连接对象" class="headerlink" title="2.连接对象"></a>2.连接对象</h1><ul>
<li>connect()函数成功连接后返回的对象</li>
<li>方法<ol>
<li>cursor()返回操作数据库的游标</li>
<li>commit()事务提交</li>
<li>rollback()事务回滚</li>
<li>close()关闭连接</li>
</ol>
</li>
</ul>
<h1 id="3-游标对象"><a href="#3-游标对象" class="headerlink" title="3.游标对象"></a>3.游标对象</h1><ul>
<li>连接对象的cursor()方法返回游标对象</li>
<li>方法<ol>
<li>callproc(pname [,params])  调用存储过程</li>
<li>execute(sqlstr [,params]) 执行sql查询语句</li>
<li>executemany(sqlstr [,seq-params]) 以序列中的参数执行多次sql查询</li>
<li>fetchone() 获取查询结果中的一个数据行</li>
<li>fetmany(size) 获取查询结果中指定数量的数据行</li>
<li>fetchall()获取查询结果的所有行</li>
<li>nextset() 获取所有查询结果集当前结果集的下一个结果集</li>
<li>可迭代获取结果</li>
</ol>
</li>
<li>属性<ul>
<li>arraysize</li>
<li>setinputsize</li>
<li>setoutputsize</li>
</ul>
</li>
</ul>
<h1 id="4-操作异常"><a href="#4-操作异常" class="headerlink" title="4.操作异常"></a>4.操作异常</h1><ul>
<li>StandardError<ul>
<li>Waring</li>
<li>Error <ul>
<li>InterfaceError</li>
<li>DataBaseError</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="5-参数形式"><a href="#5-参数形式" class="headerlink" title="5.参数形式"></a>5.参数形式</h1><ul>
<li>sql查询语句中的使用参数时占位符的形式由模块级变量paramstyle的值指定</li>
<li>qmark:(?)</li>
<li>numeric:(:1)</li>
<li>named:(:name)</li>
<li>format:(%s)<br>  cursor.executemany(‘INSERT INTO t_user values(%s,%s)’,(1,’zhangsan’))</li>
<li>pyformat:(%(name)s)<br>  cursor.execute(“insert into student values(%(id)s,%(name)s,%(grade)s)” , {‘id’:6,’name’:’haha’,’grade’:100})     使用%(name)s作为占位符，以字典的方式提供参数</li>
<li>pyformat:(%(name)d)</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/56/">56</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/header.jpg"
               alt="Mr. Chen" />
          <p class="site-author-name" itemprop="name">Mr. Chen</p>
           
              <p class="site-description motion-element" itemprop="description">一个技术渣的自说自话</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">555</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr. Chen</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
