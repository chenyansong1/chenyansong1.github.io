<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>aof日志持久化 | Chen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.简介除了Redis的持久化功能外，Redis还提供了AOF（Append Only File ）持久化功能，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的，如下图：  aof持久化功能的实现可以分为命令追加（append），文件写入、文件同步（sync）三个步骤 2.命令追加服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的aof_buf缓冲区">
<meta name="keywords" content="redis">
<meta property="og:type" content="article">
<meta property="og:title" content="aof日志持久化">
<meta property="og:url" content="http://yoursite.com/2017/04/16/nosql/redis/aof日志持久化/index.html">
<meta property="og:site_name" content="Chen's Blog">
<meta property="og:description" content="1.简介除了Redis的持久化功能外，Redis还提供了AOF（Append Only File ）持久化功能，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的，如下图：  aof持久化功能的实现可以分为命令追加（append），文件写入、文件同步（sync）三个步骤 2.命令追加服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的aof_buf缓冲区">
<meta property="og:image" content="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/1.png">
<meta property="og:image" content="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/2.png">
<meta property="og:image" content="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/3.png">
<meta property="og:image" content="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/4.png">
<meta property="og:updated_time" content="2017-02-24T17:10:16.965Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="aof日志持久化">
<meta name="twitter:description" content="1.简介除了Redis的持久化功能外，Redis还提供了AOF（Append Only File ）持久化功能，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的，如下图：  aof持久化功能的实现可以分为命令追加（append），文件写入、文件同步（sync）三个步骤 2.命令追加服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的aof_buf缓冲区">
<meta name="twitter:image" content="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Chen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Chen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一个技术渣的自说自话</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-nosql/redis/aof日志持久化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/16/nosql/redis/aof日志持久化/" class="article-date">
  <time datetime="2017-04-16T04:47:25.780Z" itemprop="datePublished">2017-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/redis/">redis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      aof日志持久化
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><p>除了Redis的持久化功能外，Redis还提供了AOF（Append Only File ）持久化功能，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的，如下图：</p>
<p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/1.png" alt=""></p>
<p>aof持久化功能的实现可以分为命令追加（append），文件写入、文件同步（sync）三个步骤</p>
<h1 id="2-命令追加"><a href="#2-命令追加" class="headerlink" title="2.命令追加"></a>2.命令追加</h1><p>服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的aof_buf缓冲区的末尾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">struct redisServer&#123;</div><div class="line">    //....</div><div class="line">    //aof缓冲区</div><div class="line">    sds aof_buf;</div><div class="line">    //.....</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如：如果客户端向服务器发送以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">redis&gt; set key value</div><div class="line">ok</div></pre></td></tr></table></figure></p>
<p>那么在aof_buf缓冲区的末尾：</p>
<p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/2.png" alt=""></p>
<h1 id="3-文件写入与同步"><a href="#3-文件写入与同步" class="headerlink" title="3.文件写入与同步"></a>3.文件写入与同步</h1><p>Redis的服务器进程就是一个事件循环（loop），这个循环中的文件事件负责接收客户端的命令请求，以及向客户端发送命令回复，而时间事件负责执行向serverCron函数这样需要定时运行的函数, 在服务器每次结束一个事件循环之前，他都会调用flushAppendOnlyFile函数，考虑是否需要将aof_buf缓冲区中的内容写入和保存到AOF文件里面，这个过程可以用下面的伪代码表示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">def eventLoop():</div><div class="line">    while True:</div><div class="line">        #处理文件事件，接受命令请求以及发送命令回复</div><div class="line">        #处理命令请求时可能会有新内容被追加到aof_buf缓冲区中</div><div class="line">        processFileEvents()</div><div class="line"></div><div class="line">        #处理时间事件（定时任务）</div><div class="line">        processTimeEvents()</div><div class="line"></div><div class="line">        #考虑是否要将aof_buf中的内容写入和保存到aof文件里面</div><div class="line">        flushAppendOnlyFile()</div></pre></td></tr></table></figure>
<p>flushAppendOnlyFile函数的行为有配置文件中的appendfsync选项的值来确定</p>
<table>
<thead>
<tr>
<th>appendfsync选项的值</th>
<th>flushAppendOnlyFile函数的行为</th>
</tr>
</thead>
<tbody>
<tr>
<td>always</td>
<td>将aof_buf缓冲区中你的所有内容写入到AOF文件中</td>
</tr>
<tr>
<td>everysec</td>
<td>将aof_buf缓冲区中的所有内容写入到AOF文件中，如果上次同步aof文件的时间距离现在超过一秒，那么再次对aof文件进行同步，并且这个同步操作是由一个线程专门负责执行的</td>
</tr>
<tr>
<td>no</td>
<td>将aof_buf缓冲区中你的所有内容写入到aof文件中，但并不对aof文件进行同步，何时同步由操作系统决定</td>
</tr>
</tbody>
</table>
<h1 id="4-配置文件中和aof相关的参数"><a href="#4-配置文件中和aof相关的参数" class="headerlink" title="4.配置文件中和aof相关的参数"></a>4.配置文件中和aof相关的参数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">appendonly no                #是否打开aof日志功能</div><div class="line"></div><div class="line">appendfilename &quot;appendonly.aof&quot;            #aof文件名</div><div class="line"></div><div class="line"># appendfsync always            #每一个命令都立即同步到aof，安全，速度慢</div><div class="line">appendfsync everysec            #每秒写1次aof</div><div class="line"># appendfsync no            #由操作系统判断缓冲区的大小统一写入aof</div><div class="line"></div><div class="line">no-appendfsync-on-rewrite no            #正在导出rdb快照的过程中要不要停止同步aof</div><div class="line"></div><div class="line"></div><div class="line">auto-aof-rewrite-percentage 100            #aof文件大小比上次重写时的大小，增长率100%时重写</div><div class="line">auto-aof-rewrite-min-size 64mb            #aof文件至少超过64M时重写</div></pre></td></tr></table></figure>
<h1 id="5-aof文件的载入与数据还原"><a href="#5-aof文件的载入与数据还原" class="headerlink" title="5.aof文件的载入与数据还原"></a>5.aof文件的载入与数据还原</h1><p>因为aof文件里面包含了重建数据库状态所需的所有写命令，所以只要服务器读入并重新执行一遍aof文件里面保存的写命令，就可以还原服务器关闭之前的数据库状态，步骤如下（以下步骤都是在服务端启动时完成的）：</p>
<ol>
<li>创建一个不带网络连接的伪客户端<br> 因为要执行aof中的命令，而命令只能在客户端中执行</li>
<li>从aof文件中分析并读取一行一条写命令</li>
<li>使用伪客户端执行被读出的写命令</li>
<li>循环执行步骤2和步骤3，知道aof文件中的所有写命令都被处理完毕为止</li>
</ol>
<p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/3.png" alt=""></p>
<h1 id="6-aof重写"><a href="#6-aof重写" class="headerlink" title="6.aof重写"></a>6.aof重写</h1><p>随着服务器运行时间的流逝，aof文件中的内容会越来越多，文件的体积会越来越大，并且aof文件的体积越大，使用aof文件来进行数据还原所需的时间就越多</p>
<p>举例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">redis&gt;push list &quot;a&quot; &quot;b&quot;         //[&quot;a&apos;, &quot;b&quot;]</div><div class="line"></div><div class="line">redis&gt;push list &quot;c&quot;               //[&quot;a&apos;, &quot;b&quot;, &quot;c&quot;]</div><div class="line"></div><div class="line">redis&gt;push list &quot;d&quot; &quot;e&quot;      //[&quot;a&apos;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]</div><div class="line"></div><div class="line"></div><div class="line">redis&gt;lpop list</div><div class="line"></div><div class="line">redis&gt;lpoplist</div><div class="line"></div><div class="line">redis&gt;rpush list &quot;f&quot;  &quot;g&quot;            //[c, d ,e ,f, g]</div><div class="line"></div><div class="line">&apos;那么光是为了记录这个list键的状态，aof文件就需要保存6条命令，在实际应用中，写命令执行的次数和频率会比</div><div class="line">上面的简单示例要高得多，所以造成的问题也会严重得多，所以就有了aof重写的功能&apos;</div></pre></td></tr></table></figure></p>
<p>通过重写，Redis服务器可以创建一个新的aof文件来替代现有的aof文件，新旧两个aof文件所保存的数据库状态想听，但是新aof文件不会包含任何浪费空间的冗余命令，所以以新aof文件的体积通常会比旧aof文件的体积要小得多</p>
<h1 id="7-aof文件重写的实现"><a href="#7-aof文件重写的实现" class="headerlink" title="7.aof文件重写的实现"></a>7.aof文件重写的实现</h1><p>aof 文件重写并不需要对现有的aof文件进行任何操作、分析或者写入操作，这个功能是通过读取服务器,当前的数据库状态来实现的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">redis&gt;push list &quot;a&quot; &quot;b&quot;         //[&quot;a&apos;, &quot;b&quot;]</div><div class="line"> </div><div class="line">redis&gt;push list &quot;c&quot;               //[&quot;a&apos;, &quot;b&quot;, &quot;c&quot;]</div><div class="line"> </div><div class="line">redis&gt;push list &quot;d&quot; &quot;e&quot;      //[&quot;a&apos;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]</div><div class="line"> </div><div class="line"> </div><div class="line">redis&gt;lpop list</div><div class="line"> </div><div class="line">redis&gt;lpoplist</div><div class="line"> </div><div class="line">redis&gt;rpush list &quot;f&quot;  &quot;g&quot;            //[c, d ,e ,f, g]</div><div class="line"></div><div class="line">&apos;如果没有使用重写，那么aof中将被记录6条命令</div><div class="line">重写：直接从数据库中读取键list的值，然后用一条rpush list &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot;命令来替代保存在aof文件中你的</div><div class="line">6条命令，这样就可以将保存list键所需的命令从6条减少为1条</div><div class="line"></div><div class="line">&apos;</div></pre></td></tr></table></figure>
<p>重写的伪代码实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">def aof_rewrite(new_aof_file_name):</div><div class="line">    #创建新aof文件</div><div class="line">    f = create_file(new_aof_file_name)</div><div class="line">    </div><div class="line">    #遍历数据库</div><div class="line">    for db in redisServer.db:</div><div class="line">        #忽略空数据库</div><div class="line">        if db.is_empty(): continue</div><div class="line">        </div><div class="line">        #写入select命令，指定数据库号码</div><div class="line">        f.write_command(&quot;select&quot;+db.id)</div><div class="line"></div><div class="line">        #遍历数据库中的所有的键</div><div class="line">        for key in db:</div><div class="line">            #忽略已过期的键</div><div class="line">            if key.is_expired(): continue</div><div class="line">            #根据键的类型对键进行重写</div><div class="line">            if key.type == string:</div><div class="line">                rewrite_string(key)</div><div class="line">            elif    key.type == List:</div><div class="line">                rewrite_list(key)</div><div class="line">            elif    key.type == Hash:</div><div class="line">                rewrite_hash(key)</div><div class="line">            elif    key.type == Set:</div><div class="line">                rewrite_set(key)</div><div class="line">            elif    key.type == SortedSet:</div><div class="line">                rewrite_sorted_set(key)</div><div class="line"></div><div class="line">            #如果键带有过期时间，那么过期时间也要被重写</div><div class="line">            if key.have_expire_time():</div><div class="line">                rewrite_expire_time(key)</div><div class="line">    </div><div class="line">    #写入完毕，关闭文件</div><div class="line">    f.close()</div></pre></td></tr></table></figure></p>
<h1 id="8-aof后台重写"><a href="#8-aof后台重写" class="headerlink" title="8.aof后台重写"></a>8.aof后台重写</h1><p>aof_rewrite函数在重写的时候会大量的写入操作，所以调用这个函数的线程将被长时间的阻塞，因为Redis服务器使用单个线程来处理命令请求，所以如果由服务器直接调用aof_rewrite函数的话<br>那么在重写aof文件期间，服务器将无法处理客户端发来的请求命令，所以将重写的任务放到子进程里执行</p>
<ol>
<li>子进程进行aof重写期间，服务器进程（父进程）可以继续处理命令请求</li>
<li>子进程带有服务器进程的数据副本，使用子进程而不是线程，可以避免使用锁的情况下，保证数据的安全性</li>
<li>需要解决的问题：在子进程进行aof重写期间，服务器进程还需要继续处理命令请求，而新的命令可能<br>对现有的数据库状态进行修改，从而使得服务器当前的数据库状态和重写后的aof文件所保存的数据库状态不一致</li>
</ol>
<p> 如下：</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>服务器进程</th>
<th>子进程</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>执行命令: set k1 v1</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td>执行命令: set k1 v2</td>
<td></td>
</tr>
<tr>
<td>T3</td>
<td>执行命令: set k1 v3</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td>创建子进程,执行aof文件重写</td>
<td>开始aof文件重写</td>
</tr>
<tr>
<td>T5</td>
<td>执行命令: set k2 10086</td>
<td>执行重写操作</td>
</tr>
<tr>
<td>T6</td>
<td>执行命令: set k3 123456</td>
<td>执行重写操作</td>
</tr>
<tr>
<td>T7</td>
<td>执行命令: set k4 2222</td>
<td>完成aof文件重写</td>
</tr>
</tbody>
</table>
<p>当子进程进行重写时，数据库中只有一个k1键，但是当子进程完成aof文件重写之后，服务器进程的数据库中已经新设置了k2 , k3 ,k4三个键，因此，重写后的aof文件和服务器当前的数据库状态并不一致<br>新的aof文件只保存了k1一个键的数据，而服务器数据库现在却有k1,  k2,  k3 , k4四个键</p>
<p>为了解决数据不一致的问题，Redis服务器设置了一个aof重写缓冲区，这个缓冲区在服务器创建子进程之后开始使用，当Redis服务器执行完一个写命令之后，他会同时将这个写命令发送给aof缓冲区和aof重写缓冲区</p>
<p><img src="http://ols7leonh.bkt.clouddn.com//assert/img/nosql/redis/aof/4.png" alt=""></p>
<p>在子进程执行aof重写期间，服务器进程需要执行以下三个工作：</p>
<ol>
<li>执行客户端发送来的命令</li>
<li>将执行后的写命令追加到aof缓冲区</li>
<li>将执行后的写命令追加到aof重写缓冲区</li>
</ol>
<p>当子进程完成aof重写工作之后，他会向父进程发送一个信号，父进程在接到信号之后，会调用一个信号处理函数，并执行以下工作：</p>
<ol>
<li>将aof重写缓冲区中的所有内容写入到aof文件中，这时新aof文件所保存的数据库状态将和服务器当前的数据库状态一致</li>
<li>对新的aof文件进行改名，原子地覆盖现有的aof文件，完成新旧两个aof文件的替换</li>
<li>在整个aof后台重写过程中，只有信号处理函数执行时会对服务器进程（父进程）造成阻塞，在其他时候</li>
</ol>
<p>aof后台重写都不会阻塞父进程，这将aof重写对服务器性能造成的影响降到了最低</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>服务器进程</th>
<th>子进程</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>执行命令: set k1 v1</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td>执行命令: set k1 v2</td>
<td></td>
</tr>
<tr>
<td>T3</td>
<td>执行命令: set k1 v3</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td>创建子进程,执行aof文件重写</td>
<td>开始aof文件重写</td>
</tr>
<tr>
<td>T5</td>
<td>执行命令: set k2 10086</td>
<td>执行重写操作</td>
</tr>
<tr>
<td>T6</td>
<td>执行命令: set k3 123456</td>
<td>执行重写操作</td>
</tr>
<tr>
<td>T7</td>
<td>执行命令: set k4 2222</td>
<td>完成aof文件重写,向父进程发送信号</td>
</tr>
<tr>
<td>T8</td>
<td>接收到子进程发来的信号，将命令：<br\> set k2 10086 <br\>set k3 123456 <br\>set k4 2222 <br\>追加到新aof文件的末尾</br\></br\></br\></br\></td>
<td></td>
</tr>
<tr>
<td>T9</td>
<td>用新aof文件覆盖旧aof文件</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/16/nosql/redis/aof日志持久化/" data-id="cj290scua01hnssqq0bqb1qmz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/16/nosql/mongodb/聚集运算之group与aggregate(转)/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          聚集运算之group与aggregate(转)
        
      </div>
    </a>
  
  
    <a href="/2017/04/16/nosql/redis/flushall故障处理和rdb服务器间的迁移/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">flushall故障处理和rdb服务器间的迁移</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA/">IDEA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NFS/">NFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tachyon/">Tachyon</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/azkaban/">azkaban</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/echarts/">echarts</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/flume/">flume</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hbase/">hbase</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hive/">hive</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/inotify/">inotify</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kafka/">kafka</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/logstash/">logstash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/markdown/">markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/memcached/">memcached</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/project/">project</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/rsync/">rsync</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/scala/">scala</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/socket/">socket</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/sqoop/">sqoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/storm/">storm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据仓库/">数据仓库</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux基础命令/">Linux基础命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux重要配置文件/">Linux重要配置文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NFS/">NFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO/">NIO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azkaban/">azkaban</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts/">echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flume/">flume</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">hbase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/">hive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inotify/">inotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mapreduce/">mapreduce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memcached/">memcached</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/project/">project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpc/">rpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scala/">scala</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scala函数式编程/">scala函数式编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scala编程/">scala编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqoop/">sqoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/storm/">storm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据仓库/">数据仓库</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/Linux基础命令/" style="font-size: 19.52px;">Linux基础命令</a> <a href="/tags/Linux重要配置文件/" style="font-size: 14.76px;">Linux重要配置文件</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/NIO/" style="font-size: 11.43px;">NIO</a> <a href="/tags/azkaban/" style="font-size: 10.48px;">azkaban</a> <a href="/tags/echarts/" style="font-size: 10.95px;">echarts</a> <a href="/tags/flume/" style="font-size: 10.95px;">flume</a> <a href="/tags/hadoop/" style="font-size: 18.57px;">hadoop</a> <a href="/tags/hbase/" style="font-size: 13.33px;">hbase</a> <a href="/tags/hive/" style="font-size: 18.1px;">hive</a> <a href="/tags/inotify/" style="font-size: 10px;">inotify</a> <a href="/tags/java/" style="font-size: 12.38px;">java</a> <a href="/tags/kafka/" style="font-size: 12.86px;">kafka</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/logstash/" style="font-size: 10.48px;">logstash</a> <a href="/tags/mapreduce/" style="font-size: 16.67px;">mapreduce</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/memcached/" style="font-size: 13.81px;">memcached</a> <a href="/tags/mongodb/" style="font-size: 14.76px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 17.14px;">mysql</a> <a href="/tags/netty/" style="font-size: 10.95px;">netty</a> <a href="/tags/nginx/" style="font-size: 14.29px;">nginx</a> <a href="/tags/project/" style="font-size: 10.48px;">project</a> <a href="/tags/python/" style="font-size: 19.05px;">python</a> <a href="/tags/redis/" style="font-size: 17.14px;">redis</a> <a href="/tags/rpc/" style="font-size: 10.48px;">rpc</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/scala/" style="font-size: 17.62px;">scala</a> <a href="/tags/scala函数式编程/" style="font-size: 11.9px;">scala函数式编程</a> <a href="/tags/scala编程/" style="font-size: 15.71px;">scala编程</a> <a href="/tags/shell/" style="font-size: 17.62px;">shell</a> <a href="/tags/socket/" style="font-size: 11.9px;">socket</a> <a href="/tags/spark/" style="font-size: 20px;">spark</a> <a href="/tags/sqoop/" style="font-size: 10.95px;">sqoop</a> <a href="/tags/storm/" style="font-size: 15.24px;">storm</a> <a href="/tags/zookeeper/" style="font-size: 16.19px;">zookeeper</a> <a href="/tags/数据仓库/" style="font-size: 11.43px;">数据仓库</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/02/bigdata/spark从入门到精通_笔记/Tachyon/">Tachyon</a>
          </li>
        
          <li>
            <a href="/2017/04/30/数据仓库/数据仓库2/">数据仓库</a>
          </li>
        
          <li>
            <a href="/2017/04/29/IDEA/IDEA/">IDEA</a>
          </li>
        
          <li>
            <a href="/2017/04/29/数据仓库/ETL/">ETL</a>
          </li>
        
          <li>
            <a href="/2017/04/28/数据仓库/PowderDesigner/">PowderDesigner的使用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Mr. Chen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>




  </div>
</body>
</html>